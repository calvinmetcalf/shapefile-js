!function(t,s){"function"==typeof define&&define.amd?define(s):"undefined"!=typeof module?module.exports=s():t.shp=s()}(this,function(){var requirejs,require,define;return function(t){function s(t,s){return g.call(t,s)}function i(t,s){var i,e,a,n,r,h,o,l,u,f,c=s&&s.split("/"),d=m.map,p=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(s){for(c=c.slice(0,c.length-1),t=c.concat(t.split("/")),l=0;l<t.length;l+=1)if(f=t[l],"."===f)t.splice(l,1),l-=1;else if(".."===f){if(1===l&&(".."===t[2]||".."===t[0]))break;l>0&&(t.splice(l-1,2),l-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((c||p)&&d){for(i=t.split("/"),l=i.length;l>0;l-=1){if(e=i.slice(0,l).join("/"),c)for(u=c.length;u>0;u-=1)if(a=d[c.slice(0,u).join("/")],a&&(a=a[e])){n=a,r=l;break}if(n)break;!h&&p&&p[e]&&(h=p[e],o=l)}!n&&h&&(n=h,r=o),n&&(i.splice(0,r,n),t=i.join("/"))}return t}function e(s,i){return function(){return u.apply(t,_.call(arguments,0).concat([s,i]))}}function a(t){return function(s){return i(s,t)}}function n(t){return function(s){d[t]=s}}function r(i){if(s(p,i)){var e=p[i];delete p[i],M[i]=!0,l.apply(t,e)}if(!s(d,i)&&!s(M,i))throw new Error("No "+i);return d[i]}function h(t){var s,i=t?t.indexOf("!"):-1;return i>-1&&(s=t.substring(0,i),t=t.substring(i+1,t.length)),[s,t]}function o(t){return function(){return m&&m.config&&m.config[t]||{}}}var l,u,f,c,d={},p={},m={},M={},g=Object.prototype.hasOwnProperty,_=[].slice;f=function(t,s){var e,n=h(t),o=n[0];return t=n[1],o&&(o=i(o,s),e=r(o)),o?t=e&&e.normalize?e.normalize(t,a(s)):i(t,s):(t=i(t,s),n=h(t),o=n[0],t=n[1],o&&(e=r(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:e}},c={require:function(t){return e(t)},exports:function(t){var s=d[t];return"undefined"!=typeof s?s:d[t]={}},module:function(t){return{id:t,uri:"",exports:d[t],config:o(t)}}},l=function(i,a,h,o){var l,u,m,g,_,y,v=[];if(o=o||i,"function"==typeof h){for(a=!a.length&&h.length?["require","exports","module"]:a,_=0;_<a.length;_+=1)if(g=f(a[_],o),u=g.f,"require"===u)v[_]=c.require(i);else if("exports"===u)v[_]=c.exports(i),y=!0;else if("module"===u)l=v[_]=c.module(i);else if(s(d,u)||s(p,u)||s(M,u))v[_]=r(u);else{if(!g.p)throw new Error(i+" missing "+u);g.p.load(g.n,e(o,!0),n(u),{}),v[_]=d[u]}m=h.apply(d[i],v),i&&(l&&l.exports!==t&&l.exports!==d[i]?d[i]=l.exports:m===t&&y||(d[i]=m))}else i&&(d[i]=h)},requirejs=require=u=function(s,i,e,a,n){return"string"==typeof s?c[s]?c[s](i):r(f(s,i).f):(s.splice||(m=s,i.splice?(s=i,i=e,e=null):s=t),i=i||function(){},"function"==typeof e&&(e=a,a=n),a?l(t,s,i,e):setTimeout(function(){l(t,s,i,e)},4),u)},u.config=function(t){return m=t,m.deps&&u(m.deps,m.callback),u},requirejs._defined=d,define=function(t,i,e){i.splice||(e=i,i=[]),s(d,t)||s(p,t)||(p[t]=[t,i,e])},define.amd={jQuery:!0}}(),define("node_modules/almond/almond",function(){}),define("proj4/mgrs",["require","exports","module"],function(t,s){function i(t){return t*(Math.PI/180)}function e(t){return 180*(t/Math.PI)}function a(t){var s,e,a,n,h,o,l,u,f,c=t.lat,d=t.lon,p=6378137,m=.00669438,M=.9996,g=i(c),_=i(d);f=Math.floor((d+180)/6)+1,180===d&&(f=60),c>=56&&64>c&&d>=3&&12>d&&(f=32),c>=72&&84>c&&(d>=0&&9>d?f=31:d>=9&&21>d?f=33:d>=21&&33>d?f=35:d>=33&&42>d&&(f=37)),s=6*(f-1)-180+3,u=i(s),e=m/(1-m),a=p/Math.sqrt(1-m*Math.sin(g)*Math.sin(g)),n=Math.tan(g)*Math.tan(g),h=e*Math.cos(g)*Math.cos(g),o=Math.cos(g)*(_-u),l=p*((1-m/4-3*m*m/64-5*m*m*m/256)*g-(3*m/8+3*m*m/32+45*m*m*m/1024)*Math.sin(2*g)+(15*m*m/256+45*m*m*m/1024)*Math.sin(4*g)-35*m*m*m/3072*Math.sin(6*g));var y=M*a*(o+(1-n+h)*o*o*o/6+(5-18*n+n*n+72*h-58*e)*o*o*o*o*o/120)+5e5,v=M*(l+a*Math.tan(g)*(o*o/2+(5-n+9*h+4*h*h)*o*o*o*o/24+(61-58*n+n*n+600*h-330*e)*o*o*o*o*o*o/720));return 0>c&&(v+=1e7),{northing:Math.round(v),easting:Math.round(y),zoneNumber:f,zoneLetter:r(c)}}function n(t){var s=t.northing,i=t.easting,a=t.zoneLetter,r=t.zoneNumber;if(0>r||r>60)return null;var h,o,l,u,f,c,d,p,m,M,g=.9996,_=6378137,y=.00669438,v=(1-Math.sqrt(1-y))/(1+Math.sqrt(1-y)),b=i-5e5,x=s;"N">a&&(x-=1e7),p=6*(r-1)-180+3,h=y/(1-y),d=x/g,m=d/(_*(1-y/4-3*y*y/64-5*y*y*y/256)),M=m+(3*v/2-27*v*v*v/32)*Math.sin(2*m)+(21*v*v/16-55*v*v*v*v/32)*Math.sin(4*m)+151*v*v*v/96*Math.sin(6*m),o=_/Math.sqrt(1-y*Math.sin(M)*Math.sin(M)),l=Math.tan(M)*Math.tan(M),u=h*Math.cos(M)*Math.cos(M),f=_*(1-y)/Math.pow(1-y*Math.sin(M)*Math.sin(M),1.5),c=b/(o*g);var C=M-o*Math.tan(M)/f*(c*c/2-(5+3*l+10*u-4*u*u-9*h)*c*c*c*c/24+(61+90*l+298*u+45*l*l-252*h-3*u*u)*c*c*c*c*c*c/720);C=e(C);var P=(c-(1+2*l+u)*c*c*c/6+(5-2*u+28*l-3*u*u+8*h+24*l*l)*c*c*c*c*c/120)/Math.cos(M);P=p+e(P);var S;if(t.accuracy){var A=n({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});S={top:A.lat,right:A.lon,bottom:C,left:P}}else S={lat:C,lon:P};return S}function r(t){var s="Z";return 84>=t&&t>=72?s="X":72>t&&t>=64?s="W":64>t&&t>=56?s="V":56>t&&t>=48?s="U":48>t&&t>=40?s="T":40>t&&t>=32?s="S":32>t&&t>=24?s="R":24>t&&t>=16?s="Q":16>t&&t>=8?s="P":8>t&&t>=0?s="N":0>t&&t>=-8?s="M":-8>t&&t>=-16?s="L":-16>t&&t>=-24?s="K":-24>t&&t>=-32?s="J":-32>t&&t>=-40?s="H":-40>t&&t>=-48?s="G":-48>t&&t>=-56?s="F":-56>t&&t>=-64?s="E":-64>t&&t>=-72?s="D":-72>t&&t>=-80&&(s="C"),s}function h(t,s){var i=""+t.easting,e=""+t.northing;return t.zoneNumber+t.zoneLetter+o(t.easting,t.northing,t.zoneNumber)+i.substr(i.length-5,s)+e.substr(e.length-5,s)}function o(t,s,i){var e=l(i),a=Math.floor(t/1e5),n=Math.floor(s/1e5)%20;return u(a,n,e)}function l(t){var s=t%m;return 0===s&&(s=m),s}function u(t,s,i){var e=i-1,a=M.charCodeAt(e),n=g.charCodeAt(e),r=a+t-1,h=n+s,o=!1;r>x&&(r=r-x+_-1,o=!0),(r===y||y>a&&r>y||(r>y||y>a)&&o)&&r++,(r===v||v>a&&r>v||(r>v||v>a)&&o)&&(r++,r===y&&r++),r>x&&(r=r-x+_-1),h>b?(h=h-b+_-1,o=!0):o=!1,(h===y||y>n&&h>y||(h>y||y>n)&&o)&&h++,(h===v||v>n&&h>v||(h>v||v>n)&&o)&&(h++,h===y&&h++),h>b&&(h=h-b+_-1);var l=String.fromCharCode(r)+String.fromCharCode(h);return l}function f(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var s,i=t.length,e=null,a="",n=0;!/[A-Z]/.test(s=t.charAt(n));){if(n>=2)throw"MGRSPoint bad conversion from: "+t;a+=s,n++}var r=parseInt(a,10);if(0===n||n+3>i)throw"MGRSPoint bad conversion from: "+t;var h=t.charAt(n++);if("A">=h||"B"===h||"Y"===h||h>="Z"||"I"===h||"O"===h)throw"MGRSPoint zone letter "+h+" not handled: "+t;e=t.substring(n,n+=2);for(var o=l(r),u=c(e.charAt(0),o),f=d(e.charAt(1),o);f<p(h);)f+=2e6;var m=i-n;if(0!==m%2)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var M,g,_,y,v,b=m/2,x=0,C=0;return b>0&&(M=1e5/Math.pow(10,b),g=t.substring(n,n+b),x=parseFloat(g)*M,_=t.substring(n+b),C=parseFloat(_)*M),y=x+u,v=C+f,{easting:y,northing:v,zoneLetter:h,zoneNumber:r,accuracy:M}}function c(t,s){for(var i=M.charCodeAt(s-1),e=1e5,a=!1;i!==t.charCodeAt(0);){if(i++,i===y&&i++,i===v&&i++,i>x){if(a)throw"Bad character: "+t;i=_,a=!0}e+=1e5}return e}function d(t,s){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var i=g.charCodeAt(s-1),e=0,a=!1;i!==t.charCodeAt(0);){if(i++,i===y&&i++,i===v&&i++,i>b){if(a)throw"Bad character: "+t;i=_,a=!0}e+=1e5}return e}function p(t){var s;switch(t){case"C":s=11e5;break;case"D":s=2e6;break;case"E":s=28e5;break;case"F":s=37e5;break;case"G":s=46e5;break;case"H":s=55e5;break;case"J":s=64e5;break;case"K":s=73e5;break;case"L":s=82e5;break;case"M":s=91e5;break;case"N":s=0;break;case"P":s=8e5;break;case"Q":s=17e5;break;case"R":s=26e5;break;case"S":s=35e5;break;case"T":s=44e5;break;case"U":s=53e5;break;case"V":s=62e5;break;case"W":s=7e6;break;case"X":s=79e5;break;default:s=-1}if(s>=0)return s;throw"Invalid zone letter: "+t}var m=6,M="AJSAJS",g="AFAFAF",_=65,y=73,v=79,b=86,x=90;s.forward=function(t,s){return s=s||5,h(a({lat:t.lat,lon:t.lon}),s)},s.inverse=function(t){var s=n(f(t.toUpperCase()));return[s.left,s.bottom,s.right,s.top]}}),define("proj4/Point",["./mgrs"],function(t){function s(t,i,e){if(!(this instanceof s))return new s(t,i,e);if("object"==typeof t)this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("string"==typeof t&&"undefined"==typeof i){var a=t.split(",");this.x=parseFloat(a[0]),this.y=parseFloat(a[1]),this.z=parseFloat(a[2])||0}else this.x=t,this.y=i,this.z=e||0;this.clone=function(){return new s(this.x,this.y,this.z)},this.toString=function(){return"x="+this.x+",y="+this.y},this.toShortString=function(){return this.x+", "+this.y}}return s.fromMGRS=function(i){var e=t.inverse(i);return new s((e[2]+e[0])/2,(e[3]+e[1])/2)},s.prototype.toMGRS=function(s){return t.forward({lon:this.x,lat:this.y},s)},s}),define("proj4/extend",[],function(){return function(t,s){t=t||{};var i,e;if(!s)return t;for(e in s)i=s[e],void 0!==i&&(t[e]=i);return t}}),define("proj4/common",[],function(){var t={PI:3.141592653589793,HALF_PI:1.5707963267948966,TWO_PI:6.283185307179586,FORTPI:.7853981633974483,R2D:57.29577951308232,D2R:.017453292519943295,SEC_TO_RAD:484813681109536e-20,EPSLN:1e-10,MAX_ITER:20,COS_67P5:.3826834323650898,AD_C:1.0026,PJD_UNKNOWN:0,PJD_3PARAM:1,PJD_7PARAM:2,PJD_GRIDSHIFT:3,PJD_WGS84:4,PJD_NODATUM:5,SRS_WGS84_SEMIMAJOR:6378137,SRS_WGS84_ESQUARED:.006694379990141316,SIXTH:.16666666666666666,RA4:.04722222222222222,RA6:.022156084656084655,RV4:.06944444444444445,RV6:.04243827160493827,msfnz:function(t,s,i){var e=t*s;return i/Math.sqrt(1-e*e)},tsfnz:function(t,s,i){var e=t*i,a=.5*t;return e=Math.pow((1-e)/(1+e),a),Math.tan(.5*(this.HALF_PI-s))/e},phi2z:function(t,s){for(var i,e,a=.5*t,n=this.HALF_PI-2*Math.atan(s),r=0;15>=r;r++)if(i=t*Math.sin(n),e=this.HALF_PI-2*Math.atan(s*Math.pow((1-i)/(1+i),a))-n,n+=e,Math.abs(e)<=1e-10)return n;return-9999},qsfnz:function(t,s){var i;return t>1e-7?(i=t*s,(1-t*t)*(s/(1-i*i)-.5/t*Math.log((1-i)/(1+i)))):2*s},iqsfnz:function(s,i){var e=1-(1-s*s)/(2*s)*Math.log((1-s)/(1+s));if(Math.abs(Math.abs(i)-e)<1e-6)return 0>i?-1*t.HALF_PI:t.HALF_PI;for(var a,n,r,h,o=Math.asin(.5*i),l=0;30>l;l++)if(n=Math.sin(o),r=Math.cos(o),h=s*n,a=Math.pow(1-h*h,2)/(2*r)*(i/(1-s*s)-n/(1-h*h)+.5/s*Math.log((1-h)/(1+h))),o+=a,Math.abs(a)<=1e-10)return o;return 0/0},asinz:function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)},e0fn:function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},e1fn:function(t){return.375*t*(1+.25*t*(1+.46875*t))},e2fn:function(t){return.05859375*t*t*(1+.75*t)},e3fn:function(t){return t*t*t*(35/3072)},mlfn:function(t,s,i,e,a){return t*a-s*Math.sin(2*a)+i*Math.sin(4*a)-e*Math.sin(6*a)},imlfn:function(t,s,i,e,a){var n,r;n=t/s;for(var h=0;15>h;h++)if(r=(t-(s*n-i*Math.sin(2*n)+e*Math.sin(4*n)-a*Math.sin(6*n)))/(s-2*i*Math.cos(2*n)+4*e*Math.cos(4*n)-6*a*Math.cos(6*n)),n+=r,Math.abs(r)<=1e-10)return n;return 0/0},srat:function(t,s){return Math.pow((1-t)/(1+t),s)},sign:function(t){return 0>t?-1:1},adjust_lon:function(t){return t=Math.abs(t)<this.PI?t:t-this.sign(t)*this.TWO_PI},adjust_lat:function(t){return t=Math.abs(t)<this.HALF_PI?t:t-this.sign(t)*this.PI},latiso:function(t,s,i){if(Math.abs(s)>this.HALF_PI)return Number.NaN;if(s===this.HALF_PI)return Number.POSITIVE_INFINITY;if(s===-1*this.HALF_PI)return Number.NEGATIVE_INFINITY;var e=t*i;return Math.log(Math.tan((this.HALF_PI+s)/2))+t*Math.log((1-e)/(1+e))/2},fL:function(t,s){return 2*Math.atan(t*Math.exp(s))-this.HALF_PI},invlatiso:function(t,s){var i=this.fL(1,s),e=0,a=0;do e=i,a=t*Math.sin(e),i=this.fL(Math.exp(t*Math.log((1+a)/(1-a))/2),s);while(Math.abs(i-e)>1e-12);return i},sinh:function(t){var s=Math.exp(t);return s=(s-1/s)/2},cosh:function(t){var s=Math.exp(t);return s=(s+1/s)/2},tanh:function(t){var s=Math.exp(t);return s=(s-1/s)/(s+1/s)},asinh:function(t){var s=t>=0?1:-1;return s*Math.log(Math.abs(t)+Math.sqrt(t*t+1))},acosh:function(t){return 2*Math.log(Math.sqrt((t+1)/2)+Math.sqrt((t-1)/2))},atanh:function(t){return Math.log((t-1)/(t+1))/2},gN:function(t,s,i){var e=s*i;return t/Math.sqrt(1-e*e)},pj_enfn:function(t){var s=[];s[0]=this.C00-t*(this.C02+t*(this.C04+t*(this.C06+t*this.C08))),s[1]=t*(this.C22-t*(this.C04+t*(this.C06+t*this.C08)));var i=t*t;return s[2]=i*(this.C44-t*(this.C46+t*this.C48)),i*=t,s[3]=i*(this.C66-t*this.C68),s[4]=i*t*this.C88,s},pj_mlfn:function(t,s,i,e){return i*=s,s*=s,e[0]*t-i*(e[1]+s*(e[2]+s*(e[3]+s*e[4])))},pj_inv_mlfn:function(s,i,e){for(var a=1/(1-i),n=s,r=t.MAX_ITER;r;--r){var h=Math.sin(n),o=1-i*h*h;if(o=(this.pj_mlfn(n,h,Math.cos(n),e)-s)*o*Math.sqrt(o)*a,n-=o,Math.abs(o)<t.EPSLN)return n}return n},nad_intr:function(t,s){var i,e={x:(t.x-1e-7)/s.del[0],y:(t.y-1e-7)/s.del[1]},a={x:Math.floor(e.x),y:Math.floor(e.y)},n={x:e.x-1*a.x,y:e.y-1*a.y},r={x:Number.NaN,y:Number.NaN};if(a.x<0){if(!(-1===a.x&&n.x>.99999999999))return r;a.x++,n.x=0}else if(i=a.x+1,i>=s.lim[0]){if(!(i===s.lim[0]&&n.x<1e-11))return r;a.x--,n.x=1}if(a.y<0){if(!(-1===a.y&&n.y>.99999999999))return r;a.y++,n.y=0}else if(i=a.y+1,i>=s.lim[1]){if(!(i===s.lim[1]&&n.y<1e-11))return r;a.y++,n.y=1}i=a.y*s.lim[0]+a.x;var h={x:s.cvs[i][0],y:s.cvs[i][1]};i++;var o={x:s.cvs[i][0],y:s.cvs[i][1]};i+=s.lim[0];var l={x:s.cvs[i][0],y:s.cvs[i][1]};i--;var u={x:s.cvs[i][0],y:s.cvs[i][1]},f=n.x*n.y,c=n.x*(1-n.y),d=(1-n.x)*(1-n.y),p=(1-n.x)*n.y;return r.x=d*h.x+c*o.x+p*u.x+f*l.x,r.y=d*h.y+c*o.y+p*u.y+f*l.y,r},nad_cvt:function(s,i,e){var a={x:Number.NaN,y:Number.NaN};if(isNaN(s.x))return a;var n={x:s.x,y:s.y};n.x-=e.ll[0],n.y-=e.ll[1],n.x=t.adjust_lon(n.x-t.PI)+t.PI;var r=t.nad_intr(n,e);if(i){if(isNaN(r.x))return a;r.x=n.x+r.x,r.y=n.y-r.y;var h,o,l=9,u=1e-12;do{if(o=t.nad_intr(r,e),isNaN(o.x)){this.reportError("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}h={x:r.x-o.x-n.x,y:r.y+o.y-n.y},r.x-=h.x,r.y-=h.y}while(l--&&Math.abs(h.x)>u&&Math.abs(h.y)>u);if(0>l)return this.reportError("Inverse grid shift iterator failed to converge."),a;a.x=t.adjust_lon(r.x+e.ll[0]),a.y=r.y+e.ll[1]}else isNaN(r.x)||(a.x=s.x-r.x,a.y=s.y+r.y);return a},C00:1,C02:.25,C04:.046875,C06:.01953125,C08:.01068115234375,C22:.75,C44:.46875,C46:.013020833333333334,C48:.007120768229166667,C66:.3645833333333333,C68:.005696614583333333,C88:.3076171875};return t}),define("proj4/constants",[],function(){var t={};return t.PrimeMeridian={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},t.Ellipsoid={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},"APL4.":{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS72:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},t.Datum={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"}},t.Datum.OSB36=t.Datum.OSGB36,t.wktProjections={"Lambert Tangential Conformal Conic Projection":"lcc",Lambert_Conformal_Conic:"lcc",Lambert_Conformal_Conic_2SP:"lcc",Mercator:"merc","Popular Visualisation Pseudo Mercator":"merc",Mercator_1SP:"merc",Transverse_Mercator:"tmerc","Transverse Mercator":"tmerc","Lambert Azimuthal Equal Area":"laea","Universal Transverse Mercator System":"utm",Hotine_Oblique_Mercator:"omerc","Hotine Oblique Mercator":"omerc",Hotine_Oblique_Mercator_Azimuth_Natural_Origin:"omerc",Hotine_Oblique_Mercator_Azimuth_Center:"omerc",Van_der_Grinten_I:"vandg",VanDerGrinten:"vandg",Stereographic_North_Pole:"sterea",Oblique_Stereographic:"sterea",Polar_Stereographic:"sterea",Polyconic:"poly",New_Zealand_Map_Grid:"nzmg",Miller_Cylindrical:"mill",Krovak:"krovak",Equirectangular:"eqc",Equidistant_Cylindrical:"eqc",Cassini:"cass",Cassini_Soldner:"cass",Azimuthal_Equidistant:"aeqd",Albers_Conic_Equal_Area:"aea",Albers:"aea",Mollweide:"moll",Lambert_Azimuthal_Equal_Area:"laea",Sinusoidal:"sinu",Equidistant_Conic:"eqdc"},t.grids={"null":{ll:[-3.14159265,-1.57079633],del:[3.14159265,1.57079633],lim:[3,3],count:9,cvs:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]]}},t}),define("proj4/global",[],function(){return function(t){t("WGS84","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}}),define("proj4/projString",["./common","./constants"],function(t,s){return function(i){var e={},a={};i.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).forEach(function(t){var s=t.split("=");"@null"!==s[1]&&(s.push(!0),a[s[0].toLowerCase()]=s[1])});var n,r,h,o={proj:"projName",datum:"datumCode",rf:function(t){e.rf=parseFloat(t,10)},lat_0:function(s){e.lat0=s*t.D2R},lat_1:function(s){e.lat1=s*t.D2R},lat_2:function(s){e.lat2=s*t.D2R},lat_ts:function(s){e.lat_ts=s*t.D2R},lon_0:function(s){e.long0=s*t.D2R},lon_1:function(s){e.long1=s*t.D2R},lon_2:function(s){e.long2=s*t.D2R},alpha:function(s){e.alpha=parseFloat(s)*t.D2R},lonc:function(s){e.longc=s*t.D2R},x_0:function(t){e.x0=parseFloat(t,10)},y_0:function(t){e.y0=parseFloat(t,10)},k_0:function(t){e.k0=parseFloat(t,10)},k:function(t){e.k0=parseFloat(t,10)},r_a:function(){e.R_A=!0},zone:function(t){e.zone=parseInt(t,10)},south:function(){e.utmSouth=!0},towgs84:function(t){e.datum_params=t.split(",").map(function(t){return parseFloat(t,10)})},to_meter:function(t){e.to_meter=parseFloat(t,10)},from_greenwich:function(s){e.from_greenwich=s*t.D2R},pm:function(i){e.from_greenwich=(s.PrimeMeridian[i]?s.PrimeMeridian[i]:parseFloat(i,10))*t.D2R},axis:function(t){var s="ewnsud";3===t.length&&-1!==s.indexOf(t.substr(0,1))&&-1!==s.indexOf(t.substr(1,1))&&-1!==s.indexOf(t.substr(2,1))&&(e.axis=t)}};for(n in a)r=a[n],n in o?(h=o[n],"function"==typeof h?h(r):e[h]=r):e[n]=r;return e}}),define("proj4/defs",["./common","./constants","./global","./projString"],function(t,s,i,e){function a(t){var s=this;if(2===arguments.length)a[t]=e(arguments[1]);else if(1===arguments.length)return Array.isArray(t)?t.map(function(t){Array.isArray(t)?a.apply(s,t):a(t)}):("string"==typeof t||("EPSG"in t?a["EPSG:"+t.EPSG]=t:"ESRI"in t?a["ESRI:"+t.ESRI]=t:"IAU2000"in t?a["IAU2000:"+t.IAU2000]=t:console.log(t)),void 0)}return i(a),a}),define("proj4/datum",["./common"],function(t){var s=function(i){if(!(this instanceof s))return new s(i);if(this.datum_type=t.PJD_WGS84,i){if(i.datumCode&&"none"===i.datumCode&&(this.datum_type=t.PJD_NODATUM),i.datum_params){for(var e=0;e<i.datum_params.length;e++)i.datum_params[e]=parseFloat(i.datum_params[e]);(0!==i.datum_params[0]||0!==i.datum_params[1]||0!==i.datum_params[2])&&(this.datum_type=t.PJD_3PARAM),i.datum_params.length>3&&(0!==i.datum_params[3]||0!==i.datum_params[4]||0!==i.datum_params[5]||0!==i.datum_params[6])&&(this.datum_type=t.PJD_7PARAM,i.datum_params[3]*=t.SEC_TO_RAD,i.datum_params[4]*=t.SEC_TO_RAD,i.datum_params[5]*=t.SEC_TO_RAD,i.datum_params[6]=i.datum_params[6]/1e6+1)}this.datum_type=i.grids?t.PJD_GRIDSHIFT:this.datum_type,this.a=i.a,this.b=i.b,this.es=i.es,this.ep2=i.ep2,this.datum_params=i.datum_params,this.datum_type===t.PJD_GRIDSHIFT&&(this.grids=i.grids)}};return s.prototype={compare_datums:function(s){return this.datum_type!==s.datum_type?!1:this.a!==s.a||Math.abs(this.es-s.es)>5e-11?!1:this.datum_type===t.PJD_3PARAM?this.datum_params[0]===s.datum_params[0]&&this.datum_params[1]===s.datum_params[1]&&this.datum_params[2]===s.datum_params[2]:this.datum_type===t.PJD_7PARAM?this.datum_params[0]===s.datum_params[0]&&this.datum_params[1]===s.datum_params[1]&&this.datum_params[2]===s.datum_params[2]&&this.datum_params[3]===s.datum_params[3]&&this.datum_params[4]===s.datum_params[4]&&this.datum_params[5]===s.datum_params[5]&&this.datum_params[6]===s.datum_params[6]:this.datum_type===t.PJD_GRIDSHIFT||s.datum_type===t.PJD_GRIDSHIFT?this.nadgrids===s.nadgrids:!0},geodetic_to_geocentric:function(s){var i,e,a,n,r,h,o,l=s.x,u=s.y,f=s.z?s.z:0,c=0;if(u<-t.HALF_PI&&u>-1.001*t.HALF_PI)u=-t.HALF_PI;else if(u>t.HALF_PI&&u<1.001*t.HALF_PI)u=t.HALF_PI;else if(u<-t.HALF_PI||u>t.HALF_PI)return null;return l>t.PI&&(l-=2*t.PI),r=Math.sin(u),o=Math.cos(u),h=r*r,n=this.a/Math.sqrt(1-this.es*h),i=(n+f)*o*Math.cos(l),e=(n+f)*o*Math.sin(l),a=(n*(1-this.es)+f)*r,s.x=i,s.y=e,s.z=a,c},geocentric_to_geodetic:function(s){var i,e,a,n,r,h,o,l,u,f,c,d,p,m,M,g,_,y=1e-12,v=y*y,b=30,x=s.x,C=s.y,P=s.z?s.z:0;if(p=!1,i=Math.sqrt(x*x+C*C),e=Math.sqrt(x*x+C*C+P*P),i/this.a<y){if(p=!0,M=0,e/this.a<y)return g=t.HALF_PI,_=-this.b,void 0}else M=Math.atan2(C,x);a=P/e,n=i/e,r=1/Math.sqrt(1-this.es*(2-this.es)*n*n),l=n*(1-this.es)*r,u=a*r,m=0;do m++,o=this.a/Math.sqrt(1-this.es*u*u),_=i*l+P*u-o*(1-this.es*u*u),h=this.es*o/(o+_),r=1/Math.sqrt(1-h*(2-h)*n*n),f=n*(1-h)*r,c=a*r,d=c*l-f*u,l=f,u=c;while(d*d>v&&b>m);return g=Math.atan(c/Math.abs(f)),s.x=M,s.y=g,s.z=_,s},geocentric_to_geodetic_noniter:function(s){var i,e,a,n,r,h,o,l,u,f,c,d,p,m,M,g,_,y=s.x,v=s.y,b=s.z?s.z:0;if(y=parseFloat(y),v=parseFloat(v),b=parseFloat(b),_=!1,0!==y)i=Math.atan2(v,y);else if(v>0)i=t.HALF_PI;else if(0>v)i=-t.HALF_PI;else if(_=!0,i=0,b>0)e=t.HALF_PI;else{if(!(0>b))return e=t.HALF_PI,a=-this.b,void 0;e=-t.HALF_PI}return r=y*y+v*v,n=Math.sqrt(r),h=b*t.AD_C,l=Math.sqrt(h*h+r),f=h/l,d=n/l,c=f*f*f,o=b+this.b*this.ep2*c,g=n-this.a*this.es*d*d*d,u=Math.sqrt(o*o+g*g),p=o/u,m=g/u,M=this.a/Math.sqrt(1-this.es*p*p),a=m>=t.COS_67P5?n/m-M:m<=-t.COS_67P5?n/-m-M:b/p+M*(this.es-1),_===!1&&(e=Math.atan(p/m)),s.x=i,s.y=e,s.z=a,s},geocentric_to_wgs84:function(s){if(this.datum_type===t.PJD_3PARAM)s.x+=this.datum_params[0],s.y+=this.datum_params[1],s.z+=this.datum_params[2];else if(this.datum_type===t.PJD_7PARAM){var i=this.datum_params[0],e=this.datum_params[1],a=this.datum_params[2],n=this.datum_params[3],r=this.datum_params[4],h=this.datum_params[5],o=this.datum_params[6],l=o*(s.x-h*s.y+r*s.z)+i,u=o*(h*s.x+s.y-n*s.z)+e,f=o*(-r*s.x+n*s.y+s.z)+a;s.x=l,s.y=u,s.z=f}},geocentric_from_wgs84:function(s){if(this.datum_type===t.PJD_3PARAM)s.x-=this.datum_params[0],s.y-=this.datum_params[1],s.z-=this.datum_params[2];else if(this.datum_type===t.PJD_7PARAM){var i=this.datum_params[0],e=this.datum_params[1],a=this.datum_params[2],n=this.datum_params[3],r=this.datum_params[4],h=this.datum_params[5],o=this.datum_params[6],l=(s.x-i)/o,u=(s.y-e)/o,f=(s.z-a)/o;s.x=l+h*u-r*f,s.y=-h*l+u+n*f,s.z=r*l-n*u+f}}},s}),define("proj4/projCode/longlat",["require","exports","module"],function(t,s){function i(t){return t}s.init=function(){},s.forward=i,s.inverse=i}),define("proj4/projCode/tmerc",["../common"],function(t){return{init:function(){this.e0=t.e0fn(this.es),this.e1=t.e1fn(this.es),this.e2=t.e2fn(this.es),this.e3=t.e3fn(this.es),this.ml0=this.a*t.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(s){var i,e,a,n=s.x,r=s.y,h=t.adjust_lon(n-this.long0),o=Math.sin(r),l=Math.cos(r);if(this.sphere){var u=l*Math.sin(h);if(Math.abs(Math.abs(u)-1)<1e-10)return 93;e=.5*this.a*this.k0*Math.log((1+u)/(1-u)),i=Math.acos(l*Math.cos(h)/Math.sqrt(1-u*u)),0>r&&(i=-i),a=this.a*this.k0*(i-this.lat0)}else{var f=l*h,c=Math.pow(f,2),d=this.ep2*Math.pow(l,2),p=Math.tan(r),m=Math.pow(p,2);i=1-this.es*Math.pow(o,2);var M=this.a/Math.sqrt(i),g=this.a*t.mlfn(this.e0,this.e1,this.e2,this.e3,r);e=this.k0*M*f*(1+c/6*(1-m+d+c/20*(5-18*m+Math.pow(m,2)+72*d-58*this.ep2)))+this.x0,a=this.k0*(g-this.ml0+M*p*c*(.5+c/24*(5-m+9*d+4*Math.pow(d,2)+c/30*(61-58*m+Math.pow(m,2)+600*d-330*this.ep2))))+this.y0}return s.x=e,s.y=a,s},inverse:function(s){var i,e,a,n,r,h,o=6;if(this.sphere){var l=Math.exp(s.x/(this.a*this.k0)),u=.5*(l-1/l),f=this.lat0+s.y/(this.a*this.k0),c=Math.cos(f);i=Math.sqrt((1-c*c)/(1+u*u)),r=t.asinz(i),0>f&&(r=-r),h=0===u&&0===c?this.long0:t.adjust_lon(Math.atan2(u,c)+this.long0)}else{var d=s.x-this.x0,p=s.y-this.y0;for(i=(this.ml0+p/this.k0)/this.a,e=i,n=0;!0&&(a=(i+this.e1*Math.sin(2*e)-this.e2*Math.sin(4*e)+this.e3*Math.sin(6*e))/this.e0-e,e+=a,!(Math.abs(a)<=t.EPSLN));n++)if(n>=o)return 95;if(Math.abs(e)<t.HALF_PI){var m=Math.sin(e),M=Math.cos(e),g=Math.tan(e),_=this.ep2*Math.pow(M,2),y=Math.pow(_,2),v=Math.pow(g,2),b=Math.pow(v,2);i=1-this.es*Math.pow(m,2);var x=this.a/Math.sqrt(i),C=x*(1-this.es)/i,P=d/(x*this.k0),S=Math.pow(P,2);r=e-x*g*S/C*(.5-S/24*(5+3*v+10*_-4*y-9*this.ep2-S/30*(61+90*v+298*_+45*b-252*this.ep2-3*y))),h=t.adjust_lon(this.long0+P*(1-S/6*(1+2*v+_-S/20*(5-2*_+28*v-3*y+8*this.ep2+24*b)))/M)}else r=t.HALF_PI*t.sign(p),h=this.long0}return s.x=h,s.y=r,s}}}),define("proj4/projCode/utm",["../common","./tmerc"],function(t,s){return{dependsOn:"tmerc",init:function(){this.zone&&(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*t.D2R,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,s.init.apply(this),this.forward=s.forward,this.inverse=s.inverse)}}}),define("proj4/projCode/gauss",["../common"],function(t){return{init:function(){var s=Math.sin(this.lat0),i=Math.cos(this.lat0);i*=i,this.rc=Math.sqrt(1-this.es)/(1-this.es*s*s),this.C=Math.sqrt(1+this.es*i*i/(1-this.es)),this.phic0=Math.asin(s/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+t.FORTPI)/(Math.pow(Math.tan(.5*this.lat0+t.FORTPI),this.C)*t.srat(this.e*s,this.ratexp))},forward:function(s){var i=s.x,e=s.y;return s.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*e+t.FORTPI),this.C)*t.srat(this.e*Math.sin(e),this.ratexp))-t.HALF_PI,s.x=this.C*i,s},inverse:function(s){for(var i=1e-14,e=s.x/this.C,a=s.y,n=Math.pow(Math.tan(.5*a+t.FORTPI)/this.K,1/this.C),r=t.MAX_ITER;r>0&&(a=2*Math.atan(n*t.srat(this.e*Math.sin(s.y),-.5*this.e))-t.HALF_PI,!(Math.abs(a-s.y)<i));--r)s.y=a;return r?(s.x=e,s.y=a,s):null}}}),define("proj4/projCode/sterea",["../common","./gauss"],function(t,s){return{init:function(){s.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(i){var e,a,n,r;return i.x=t.adjust_lon(i.x-this.long0),s.forward.apply(this,[i]),e=Math.sin(i.y),a=Math.cos(i.y),n=Math.cos(i.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*a*n),i.x=r*a*Math.sin(i.x),i.y=r*(this.cosc0*e-this.sinc0*a*n),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i},inverse:function(i){var e,a,n,r,h;if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,h=Math.sqrt(i.x*i.x+i.y*i.y)){var o=2*Math.atan2(h,this.R2);e=Math.sin(o),a=Math.cos(o),r=Math.asin(a*this.sinc0+i.y*e*this.cosc0/h),n=Math.atan2(i.x*e,h*this.cosc0*a-i.y*this.sinc0*e)}else r=this.phic0,n=0;return i.x=n,i.y=r,s.inverse.apply(this,[i]),i.x=t.adjust_lon(i.x+this.long0),i}}}),define("proj4/projCode/somerc",[],function(){return{init:function(){var t=this.lat0;this.lambda0=this.long0;var s=Math.sin(t),i=this.a,e=this.rf,a=1/e,n=2*a-Math.pow(a,2),r=this.e=Math.sqrt(n);this.R=this.k0*i*Math.sqrt(1-n)/(1-n*Math.pow(s,2)),this.alpha=Math.sqrt(1+n/(1-n)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(s/this.alpha);var h=Math.log(Math.tan(Math.PI/4+this.b0/2)),o=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+r*s)/(1-r*s));this.K=h-this.alpha*o+this.alpha*r/2*l},forward:function(t){var s=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),e=-this.alpha*(s+i)+this.K,a=2*(Math.atan(Math.exp(e))-Math.PI/4),n=this.alpha*(t.x-this.lambda0),r=Math.atan(Math.sin(n)/(Math.sin(this.b0)*Math.tan(a)+Math.cos(this.b0)*Math.cos(n))),h=Math.asin(Math.cos(this.b0)*Math.sin(a)-Math.sin(this.b0)*Math.cos(a)*Math.cos(n));return t.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,t.x=this.R*r+this.x0,t},inverse:function(t){for(var s=t.x-this.x0,i=t.y-this.y0,e=s/this.R,a=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),n=Math.asin(Math.cos(this.b0)*Math.sin(a)+Math.sin(this.b0)*Math.cos(a)*Math.cos(e)),r=Math.atan(Math.sin(e)/(Math.cos(this.b0)*Math.cos(e)-Math.sin(this.b0)*Math.tan(a))),h=this.lambda0+r/this.alpha,o=0,l=n,u=-1e3,f=0;Math.abs(l-u)>1e-7;){if(++f>20)return;o=1/this.alpha*(Math.log(Math.tan(Math.PI/4+n/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),u=l,l=2*Math.atan(Math.exp(o))-Math.PI/2}return t.x=h,t.y=l,t}}}),define("proj4/projCode/omerc",["../common"],function(t){return{init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);
var s=Math.sin(this.lat0),i=Math.cos(this.lat0),e=this.e*s;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(i,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-e*e);var a=t.tsfnz(this.e,this.lat0,s),n=this.bl/i*Math.sqrt((1-this.es)/(1-e*e));1>n*n&&(n=1);var r,h;if(isNaN(this.longc)){var o=t.tsfnz(this.e,this.lat1,Math.sin(this.lat1)),l=t.tsfnz(this.e,this.lat2,Math.sin(this.lat2));this.el=this.lat0>=0?(n+Math.sqrt(n*n-1))*Math.pow(a,this.bl):(n-Math.sqrt(n*n-1))*Math.pow(a,this.bl);var u=Math.pow(o,this.bl),f=Math.pow(l,this.bl);r=this.el/u,h=.5*(r-1/r);var c=(this.el*this.el-f*u)/(this.el*this.el+f*u),d=(f-u)/(f+u),p=t.adjust_lon(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(c*Math.tan(.5*this.bl*p)/d)/this.bl,this.long0=t.adjust_lon(this.long0);var m=t.adjust_lon(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*m)/h),this.alpha=Math.asin(n*Math.sin(this.gamma0))}else r=this.lat0>=0?n+Math.sqrt(n*n-1):n-Math.sqrt(n*n-1),this.el=r*Math.pow(a,this.bl),h=.5*(r-1/r),this.gamma0=Math.asin(Math.sin(this.alpha)/n),this.long0=this.longc-Math.asin(h*Math.tan(this.gamma0))/this.bl;this.uc=this.no_off?0:this.lat0>=0?this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha)):-1*this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha))},forward:function(s){var i,e,a,n=s.x,r=s.y,h=t.adjust_lon(n-this.long0);if(Math.abs(Math.abs(r)-t.HALF_PI)<=t.EPSLN)a=r>0?-1:1,e=this.al/this.bl*Math.log(Math.tan(t.FORTPI+.5*a*this.gamma0)),i=-1*a*t.HALF_PI*this.al/this.bl;else{var o=t.tsfnz(this.e,r,Math.sin(r)),l=this.el/Math.pow(o,this.bl),u=.5*(l-1/l),f=.5*(l+1/l),c=Math.sin(this.bl*h),d=(u*Math.sin(this.gamma0)-c*Math.cos(this.gamma0))/f;e=Math.abs(Math.abs(d)-1)<=t.EPSLN?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-d)/(1+d))/this.bl,i=Math.abs(Math.cos(this.bl*h))<=t.EPSLN?this.al*this.bl*h:this.al*Math.atan2(u*Math.cos(this.gamma0)+c*Math.sin(this.gamma0),Math.cos(this.bl*h))/this.bl}return this.no_rot?(s.x=this.x0+i,s.y=this.y0+e):(i-=this.uc,s.x=this.x0+e*Math.cos(this.alpha)+i*Math.sin(this.alpha),s.y=this.y0+i*Math.cos(this.alpha)-e*Math.sin(this.alpha)),s},inverse:function(s){var i,e;this.no_rot?(e=s.y-this.y0,i=s.x-this.x0):(e=(s.x-this.x0)*Math.cos(this.alpha)-(s.y-this.y0)*Math.sin(this.alpha),i=(s.y-this.y0)*Math.cos(this.alpha)+(s.x-this.x0)*Math.sin(this.alpha),i+=this.uc);var a=Math.exp(-1*this.bl*e/this.al),n=.5*(a-1/a),r=.5*(a+1/a),h=Math.sin(this.bl*i/this.al),o=(h*Math.cos(this.gamma0)+n*Math.sin(this.gamma0))/r,l=Math.pow(this.el/Math.sqrt((1+o)/(1-o)),1/this.bl);return Math.abs(o-1)<t.EPSLN?(s.x=this.long0,s.y=t.HALF_PI):Math.abs(o+1)<t.EPSLN?(s.x=this.long0,s.y=-1*t.HALF_PI):(s.y=t.phi2z(this.e,l),s.x=t.adjust_lon(this.long0-Math.atan2(n*Math.cos(this.gamma0)-h*Math.sin(this.gamma0),Math.cos(this.bl*i/this.al))/this.bl)),s}}}),define("proj4/projCode/lcc",["../common"],function(t){return{init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),!(Math.abs(this.lat1+this.lat2)<t.EPSLN)){var s=this.b/this.a;this.e=Math.sqrt(1-s*s);var i=Math.sin(this.lat1),e=Math.cos(this.lat1),a=t.msfnz(this.e,i,e),n=t.tsfnz(this.e,this.lat1,i),r=Math.sin(this.lat2),h=Math.cos(this.lat2),o=t.msfnz(this.e,r,h),l=t.tsfnz(this.e,this.lat2,r),u=t.tsfnz(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>t.EPSLN?Math.log(a/o)/Math.log(n/l):i,isNaN(this.ns)&&(this.ns=i),this.f0=a/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(s){var i=s.x,e=s.y;Math.abs(2*Math.abs(e)-t.PI)<=t.EPSLN&&(e=t.sign(e)*(t.HALF_PI-2*t.EPSLN));var a,n,r=Math.abs(Math.abs(e)-t.HALF_PI);if(r>t.EPSLN)a=t.tsfnz(this.e,e,Math.sin(e)),n=this.a*this.f0*Math.pow(a,this.ns);else{if(r=e*this.ns,0>=r)return null;n=0}var h=this.ns*t.adjust_lon(i-this.long0);return s.x=this.k0*n*Math.sin(h)+this.x0,s.y=this.k0*(this.rh-n*Math.cos(h))+this.y0,s},inverse:function(s){var i,e,a,n,r,h=(s.x-this.x0)/this.k0,o=this.rh-(s.y-this.y0)/this.k0;this.ns>0?(i=Math.sqrt(h*h+o*o),e=1):(i=-Math.sqrt(h*h+o*o),e=-1);var l=0;if(0!==i&&(l=Math.atan2(e*h,e*o)),0!==i||this.ns>0){if(e=1/this.ns,a=Math.pow(i/(this.a*this.f0),e),n=t.phi2z(this.e,a),-9999===n)return null}else n=-t.HALF_PI;return r=t.adjust_lon(l/this.ns+this.long0),s.x=r,s.y=n,s}}}),define("proj4/projCode/krovak",["../common"],function(t){return{init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(s){var i,e,a,n,r,h,o,l=s.x,u=s.y,f=t.adjust_lon(l-this.long0);return i=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),e=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/i)-this.s45),a=-f*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(e)+Math.sin(this.ad)*Math.cos(e)*Math.cos(a)),r=Math.asin(Math.cos(e)*Math.sin(a)/Math.cos(n)),h=this.n*r,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),s.y=o*Math.cos(h)/1,s.x=o*Math.sin(h)/1,this.czech||(s.y*=-1,s.x*=-1),s},inverse:function(t){var s,i,e,a,n,r,h,o,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),r=Math.sqrt(t.x*t.x+t.y*t.y),n=Math.atan2(t.y,t.x),a=n/Math.sin(this.s0),e=2*(Math.atan(Math.pow(this.ro0/r,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),s=Math.asin(Math.cos(this.ad)*Math.sin(e)-Math.sin(this.ad)*Math.cos(e)*Math.cos(a)),i=Math.asin(Math.cos(e)*Math.sin(a)/Math.cos(s)),t.x=this.long0-i/this.alfa,h=s,o=0;var u=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(s/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.e/2))-this.s45),Math.abs(h-t.y)<1e-10&&(o=1),h=t.y,u+=1;while(0===o&&15>u);return u>=15?null:t}}}),define("proj4/projCode/cass",["../common"],function(t){return{init:function(){this.sphere||(this.e0=t.e0fn(this.es),this.e1=t.e1fn(this.es),this.e2=t.e2fn(this.es),this.e3=t.e3fn(this.es),this.ml0=this.a*t.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(s){var i,e,a=s.x,n=s.y;if(a=t.adjust_lon(a-this.long0),this.sphere)i=this.a*Math.asin(Math.cos(n)*Math.sin(a)),e=this.a*(Math.atan2(Math.tan(n),Math.cos(a))-this.lat0);else{var r=Math.sin(n),h=Math.cos(n),o=t.gN(this.a,this.e,r),l=Math.tan(n)*Math.tan(n),u=a*Math.cos(n),f=u*u,c=this.es*h*h/(1-this.es),d=this.a*t.mlfn(this.e0,this.e1,this.e2,this.e3,n);i=o*u*(1-f*l*(1/6-(8-l+8*c)*f/120)),e=d-this.ml0+o*r/h*f*(.5+(5-l+6*c)*f/24)}return s.x=i+this.x0,s.y=e+this.y0,s},inverse:function(s){s.x-=this.x0,s.y-=this.y0;var i,e,a=s.x/this.a,n=s.y/this.a;if(this.sphere){var r=n+this.lat0;i=Math.asin(Math.sin(r)*Math.cos(a)),e=Math.atan2(Math.tan(a),Math.cos(r))}else{var h=this.ml0/this.a+n,o=t.imlfn(h,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-t.HALF_PI)<=t.EPSLN)return s.x=this.long0,s.y=t.HALF_PI,0>n&&(s.y*=-1),s;var l=t.gN(this.a,this.e,Math.sin(o)),u=l*l*l/this.a/this.a*(1-this.es),f=Math.pow(Math.tan(o),2),c=a*this.a/l,d=c*c;i=o-l*Math.tan(o)/u*c*c*(.5-(1+3*f)*c*c/24),e=c*(1-d*(f/3+(1+3*f)*f*d/15))/Math.cos(o)}return s.x=t.adjust_lon(e+this.long0),s.y=t.adjust_lat(i),s}}}),define("proj4/projCode/laea",["../common"],function(t){return{S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4,init:function(){var s=Math.abs(this.lat0);if(this.mode=Math.abs(s-t.HALF_PI)<t.EPSLN?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(s)<t.EPSLN?this.EQUIT:this.OBLIQ,this.es>0){var i;switch(this.qp=t.qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),i=Math.sin(this.lat0),this.sinb1=t.qsfnz(this.e,i)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*i*i)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(s){var i,e,a,n,r,h,o,l,u,f,c=s.x,d=s.y;if(c=t.adjust_lon(c-this.long0),this.sphere){if(r=Math.sin(d),f=Math.cos(d),a=Math.cos(c),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e=this.mode===this.EQUIT?1+f*a:1+this.sinph0*r+this.cosph0*f*a,e<=t.EPSLN)return null;e=Math.sqrt(2/e),i=e*f*Math.sin(c),e*=this.mode===this.EQUIT?r:this.cosph0*r-this.sinph0*f*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(d+this.phi0)<t.EPSLN)return null;e=t.FORTPI-.5*d,e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)),i=e*Math.sin(c),e*=a}}else{switch(o=0,l=0,u=0,a=Math.cos(c),n=Math.sin(c),r=Math.sin(d),h=t.qsfnz(this.e,r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=h/this.qp,l=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:u=1+this.sinb1*o+this.cosb1*l*a;break;case this.EQUIT:u=1+l*a;break;case this.N_POLE:u=t.HALF_PI+d,h=this.qp-h;break;case this.S_POLE:u=d-t.HALF_PI,h=this.qp+h}if(Math.abs(u)<t.EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),e=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*o-this.sinb1*l*a):(u=Math.sqrt(2/(1+l*a)))*o*this.ymf,i=this.xmf*u*l*n;break;case this.N_POLE:case this.S_POLE:h>=0?(i=(u=Math.sqrt(h))*n,e=a*(this.mode===this.S_POLE?u:-u)):i=e=0}}return s.x=this.a*i+this.x0,s.y=this.a*e+this.y0,s},inverse:function(s){s.x-=this.x0,s.y-=this.y0;var i,e,a,n,r,h,o,l=s.x/this.a,u=s.y/this.a;if(this.sphere){var f,c=0,d=0;if(f=Math.sqrt(l*l+u*u),e=.5*f,e>1)return null;switch(e=2*Math.asin(e),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(d=Math.sin(e),c=Math.cos(e)),this.mode){case this.EQUIT:e=Math.abs(f)<=t.EPSLN?0:Math.asin(u*d/f),l*=d,u=c*f;break;case this.OBLIQ:e=Math.abs(f)<=t.EPSLN?this.phi0:Math.asin(c*this.sinph0+u*d*this.cosph0/f),l*=d*this.cosph0,u=(c-Math.sin(e)*this.sinph0)*f;break;case this.N_POLE:u=-u,e=t.HALF_PI-e;break;case this.S_POLE:e-=t.HALF_PI}i=0!==u||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,u):0}else{if(o=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,u*=this.dd,h=Math.sqrt(l*l+u*u),h<t.EPSLN)return s.x=0,s.y=this.phi0,s;n=2*Math.asin(.5*h/this.rq),a=Math.cos(n),l*=n=Math.sin(n),this.mode===this.OBLIQ?(o=a*this.sinb1+u*n*this.cosb1/h,r=this.qp*o,u=h*this.cosb1*a-u*this.sinb1*n):(o=u*n/h,r=this.qp*o,u=h*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(u=-u),r=l*l+u*u,!r)return s.x=0,s.y=this.phi0,s;o=1-r/this.qp,this.mode===this.S_POLE&&(o=-o)}i=Math.atan2(l,u),e=this.authlat(Math.asin(o),this.apa)}return s.x=t.adjust_lon(this.long0+i),s.y=e,s},P00:.3333333333333333,P01:.17222222222222222,P02:.10257936507936508,P10:.06388888888888888,P11:.0664021164021164,P20:.016415012942191543,authset:function(t){var s,i=[];return i[0]=t*this.P00,s=t*t,i[0]+=s*this.P01,i[1]=s*this.P10,s*=t,i[0]+=s*this.P02,i[1]+=s*this.P11,i[2]=s*this.P20,i},authlat:function(t,s){var i=t+t;return t+s[0]*Math.sin(i)+s[1]*Math.sin(i+i)+s[2]*Math.sin(i+i+i)}}}),define("proj4/projCode/merc",["../common"],function(t){return{init:function(){var s=this.b/this.a;this.es=1-s*s,this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):t.msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function(s){var i=s.x,e=s.y;if(e*t.R2D>90&&e*t.R2D<-90&&i*t.R2D>180&&i*t.R2D<-180)return null;var a,n;if(Math.abs(Math.abs(e)-t.HALF_PI)<=t.EPSLN)return null;if(this.sphere)a=this.x0+this.a*this.k0*t.adjust_lon(i-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(t.FORTPI+.5*e));else{var r=Math.sin(e),h=t.tsfnz(this.e,e,r);a=this.x0+this.a*this.k0*t.adjust_lon(i-this.long0),n=this.y0-this.a*this.k0*Math.log(h)}return s.x=a,s.y=n,s},inverse:function(s){var i,e,a=s.x-this.x0,n=s.y-this.y0;if(this.sphere)e=t.HALF_PI-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var r=Math.exp(-n/(this.a*this.k0));if(e=t.phi2z(this.e,r),-9999===e)return null}return i=t.adjust_lon(this.long0+a/(this.a*this.k0)),s.x=i,s.y=e,s}}}),define("proj4/projCode/aea",["../common"],function(t){return{init:function(){Math.abs(this.lat1+this.lat2)<t.EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=t.msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=t.qsfnz(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=t.msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=t.qsfnz(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=t.qsfnz(this.e3,this.sin_po,this.cos_po),this.ns0=Math.abs(this.lat1-this.lat2)>t.EPSLN?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(s){var i=s.x,e=s.y;this.sin_phi=Math.sin(e),this.cos_phi=Math.cos(e);var a=t.qsfnz(this.e3,this.sin_phi,this.cos_phi),n=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,r=this.ns0*t.adjust_lon(i-this.long0),h=n*Math.sin(r)+this.x0,o=this.rh-n*Math.cos(r)+this.y0;return s.x=h,s.y=o,s},inverse:function(s){var i,e,a,n,r,h;return s.x-=this.x0,s.y=this.rh-s.y+this.y0,this.ns0>=0?(i=Math.sqrt(s.x*s.x+s.y*s.y),a=1):(i=-Math.sqrt(s.x*s.x+s.y*s.y),a=-1),n=0,0!==i&&(n=Math.atan2(a*s.x,a*s.y)),a=i*this.ns0/this.a,this.sphere?h=Math.asin((this.c-a*a)/(2*this.ns0)):(e=(this.c-a*a)/this.ns0,h=this.phi1z(this.e3,e)),r=t.adjust_lon(n/this.ns0+this.long0),s.x=r,s.y=h,s},phi1z:function(s,i){var e,a,n,r,h,o=t.asinz(.5*i);if(s<t.EPSLN)return o;for(var l=s*s,u=1;25>=u;u++)if(e=Math.sin(o),a=Math.cos(o),n=s*e,r=1-n*n,h=.5*r*r/a*(i/(1-l)-e/r+.5/s*Math.log((1-n)/(1+n))),o+=h,Math.abs(h)<=1e-7)return o;return null}}}),define("proj4/projCode/gnom",["../common"],function(t){return{init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(s){var i,e,a,n,r,h,o,l,u=s.x,f=s.y;return a=t.adjust_lon(u-this.long0),i=Math.sin(f),e=Math.cos(f),n=Math.cos(a),h=this.sin_p14*i+this.cos_p14*e*n,r=1,h>0||Math.abs(h)<=t.EPSLN?(o=this.x0+this.a*r*e*Math.sin(a)/h,l=this.y0+this.a*r*(this.cos_p14*i-this.sin_p14*e*n)/h):(o=this.x0+this.infinity_dist*e*Math.sin(a),l=this.y0+this.infinity_dist*(this.cos_p14*i-this.sin_p14*e*n)),s.x=o,s.y=l,s},inverse:function(s){var i,e,a,n,r,h;return s.x=(s.x-this.x0)/this.a,s.y=(s.y-this.y0)/this.a,s.x/=this.k0,s.y/=this.k0,(i=Math.sqrt(s.x*s.x+s.y*s.y))?(n=Math.atan2(i,this.rc),e=Math.sin(n),a=Math.cos(n),h=t.asinz(a*this.sin_p14+s.y*e*this.cos_p14/i),r=Math.atan2(s.x*e,i*this.cos_p14*a-s.y*this.sin_p14*e),r=t.adjust_lon(this.long0+r)):(h=this.phic0,r=0),s.x=r,s.y=h,s}}}),define("proj4/projCode/cea",["../common"],function(t){return{init:function(){this.sphere||(this.k0=t.msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(s){var i,e,a=s.x,n=s.y,r=t.adjust_lon(a-this.long0);if(this.sphere)i=this.x0+this.a*r*Math.cos(this.lat_ts),e=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var h=t.qsfnz(this.e,Math.sin(n));i=this.x0+this.a*this.k0*r,e=this.y0+.5*this.a*h/this.k0}return s.x=i,s.y=e,s},inverse:function(s){s.x-=this.x0,s.y-=this.y0;var i,e;return this.sphere?(i=t.adjust_lon(this.long0+s.x/this.a/Math.cos(this.lat_ts)),e=Math.asin(s.y/this.a*Math.cos(this.lat_ts))):(e=t.iqsfnz(this.e,2*s.y*this.k0/this.a),i=t.adjust_lon(this.long0+s.x/(this.a*this.k0))),s.x=i,s.y=e,s}}}),define("proj4/projCode/eqc",["../common"],function(t){return{init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_t||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(s){var i=s.x,e=s.y,a=t.adjust_lon(i-this.long0),n=t.adjust_lat(e-this.lat0);return s.x=this.x0+this.a*a*this.rc,s.y=this.y0+this.a*n,s},inverse:function(s){var i=s.x,e=s.y;return s.x=t.adjust_lon(this.long0+(i-this.x0)/(this.a*this.rc)),s.y=t.adjust_lat(this.lat0+(e-this.y0)/this.a),s}}}),define("proj4/projCode/poly",["../common"],function(t){return{init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=t.e0fn(this.es),this.e1=t.e1fn(this.es),this.e2=t.e2fn(this.es),this.e3=t.e3fn(this.es),this.ml0=this.a*t.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(s){var i,e,a,n=s.x,r=s.y,h=t.adjust_lon(n-this.long0);if(a=h*Math.sin(r),this.sphere)Math.abs(r)<=t.EPSLN?(i=this.a*h,e=-1*this.a*this.lat0):(i=this.a*Math.sin(a)/Math.tan(r),e=this.a*(t.adjust_lat(r-this.lat0)+(1-Math.cos(a))/Math.tan(r)));else if(Math.abs(r)<=t.EPSLN)i=this.a*h,e=-1*this.ml0;else{var o=t.gN(this.a,this.e,Math.sin(r))/Math.tan(r);i=o*Math.sin(a),e=this.a*t.mlfn(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+o*(1-Math.cos(a))}return s.x=i+this.x0,s.y=e+this.y0,s},inverse:function(s){var i,e,a,n,r,h,o,l,u;if(a=s.x-this.x0,n=s.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=t.EPSLN)i=t.adjust_lon(a/this.a+this.long0),e=0;else{h=this.lat0+n/this.a,o=a*a/this.a/this.a+h*h,l=h;var f;for(r=t.MAX_ITER;r;--r)if(f=Math.tan(l),u=-1*(h*(l*f+1)-l-.5*(l*l+o)*f)/((l-h)/f-1),l+=u,Math.abs(u)<=t.EPSLN){e=l;break}i=t.adjust_lon(this.long0+Math.asin(a*Math.tan(l)/this.a)/Math.sin(e))}else if(Math.abs(n+this.ml0)<=t.EPSLN)e=0,i=t.adjust_lon(this.long0+a/this.a);else{h=(this.ml0+n)/this.a,o=a*a/this.a/this.a+h*h,l=h;var c,d,p,m,M;for(r=t.MAX_ITER;r;--r)if(M=this.e*Math.sin(l),c=Math.sqrt(1-M*M)*Math.tan(l),d=this.a*t.mlfn(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),m=d/this.a,u=(h*(c*m+1)-m-.5*c*(m*m+o))/(this.es*Math.sin(2*l)*(m*m+o-2*h*m)/(4*c)+(h-m)*(c*p-2/Math.sin(2*l))-p),l-=u,Math.abs(u)<=t.EPSLN){e=l;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(e),2))*Math.tan(e),i=t.adjust_lon(this.long0+Math.asin(a*c/this.a)/Math.sin(e))}return s.x=i,s.y=e,s}}}),define("proj4/projCode/nzmg",["../common"],function(t){return{iterations:1,init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(s){var i,e=s.x,a=s.y,n=a-this.lat0,r=e-this.long0,h=1e-5*(n/t.SEC_TO_RAD),o=r,l=1,u=0;for(i=1;10>=i;i++)l*=h,u+=this.A[i]*l;var f,c,d=u,p=o,m=1,M=0,g=0,_=0;for(i=1;6>=i;i++)f=m*d-M*p,c=M*d+m*p,m=f,M=c,g=g+this.B_re[i]*m-this.B_im[i]*M,_=_+this.B_im[i]*m+this.B_re[i]*M;return s.x=_*this.a+this.x0,s.y=g*this.a+this.y0,s},inverse:function(s){var i,e,a,n=s.x,r=s.y,h=n-this.x0,o=r-this.y0,l=o/this.a,u=h/this.a,f=1,c=0,d=0,p=0;for(i=1;6>=i;i++)e=f*l-c*u,a=c*l+f*u,f=e,c=a,d=d+this.C_re[i]*f-this.C_im[i]*c,p=p+this.C_im[i]*f+this.C_re[i]*c;for(var m=0;m<this.iterations;m++){var M,g,_=d,y=p,v=l,b=u;for(i=2;6>=i;i++)M=_*d-y*p,g=y*d+_*p,_=M,y=g,v+=(i-1)*(this.B_re[i]*_-this.B_im[i]*y),b+=(i-1)*(this.B_im[i]*_+this.B_re[i]*y);_=1,y=0;var x=this.B_re[1],C=this.B_im[1];for(i=2;6>=i;i++)M=_*d-y*p,g=y*d+_*p,_=M,y=g,x+=i*(this.B_re[i]*_-this.B_im[i]*y),C+=i*(this.B_im[i]*_+this.B_re[i]*y);var P=x*x+C*C;d=(v*x+b*C)/P,p=(b*x-v*C)/P}var S=d,A=p,I=1,w=0;for(i=1;9>=i;i++)I*=S,w+=this.D[i]*I;var E=this.lat0+1e5*w*t.SEC_TO_RAD,N=this.long0+A;return s.x=N,s.y=E,s}}}),define("proj4/projCode/mill",["../common"],function(t){return{init:function(){},forward:function(s){var i=s.x,e=s.y,a=t.adjust_lon(i-this.long0),n=this.x0+this.a*a,r=this.y0+1.25*this.a*Math.log(Math.tan(t.PI/4+e/2.5));return s.x=n,s.y=r,s},inverse:function(s){s.x-=this.x0,s.y-=this.y0;var i=t.adjust_lon(this.long0+s.x/this.a),e=2.5*(Math.atan(Math.exp(.8*s.y/this.a))-t.PI/4);return s.x=i,s.y=e,s}}}),define("proj4/projCode/sinu",["../common"],function(t){return{init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=t.pj_enfn(this.es)},forward:function(s){var i,e,a=s.x,n=s.y;if(a=t.adjust_lon(a-this.long0),this.sphere){if(this.m)for(var r=this.n*Math.sin(n),h=t.MAX_ITER;h;--h){var o=(this.m*n+Math.sin(n)-r)/(this.m+Math.cos(n));if(n-=o,Math.abs(o)<t.EPSLN)break}else n=1!==this.n?Math.asin(this.n*Math.sin(n)):n;i=this.a*this.C_x*a*(this.m+Math.cos(n)),e=this.a*this.C_y*n}else{var l=Math.sin(n),u=Math.cos(n);e=this.a*t.pj_mlfn(n,l,u,this.en),i=this.a*a*u/Math.sqrt(1-this.es*l*l)}return s.x=i,s.y=e,s},inverse:function(s){var i,e,a;if(s.x-=this.x0,s.y-=this.y0,i=s.y/this.a,this.sphere)s.y/=this.C_y,i=this.m?Math.asin((this.m*s.y+Math.sin(s.y))/this.n):1!==this.n?Math.asin(Math.sin(s.y)/this.n):s.y,a=s.x/(this.C_x*(this.m+Math.cos(s.y)));else{i=t.pj_inv_mlfn(s.y/this.a,this.es,this.en);var n=Math.abs(i);n<t.HALF_PI?(n=Math.sin(i),e=this.long0+s.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(i)),a=t.adjust_lon(e)):n-t.EPSLN<t.HALF_PI&&(a=this.long0)}return s.x=a,s.y=i,s}}}),define("proj4/projCode/moll",["../common"],function(t){return{init:function(){},forward:function(s){for(var i=s.x,e=s.y,a=t.adjust_lon(i-this.long0),n=e,r=t.PI*Math.sin(e),h=0;!0;h++){var o=-(n+Math.sin(n)-r)/(1+Math.cos(n));if(n+=o,Math.abs(o)<t.EPSLN)break}n/=2,t.PI/2-Math.abs(e)<t.EPSLN&&(a=0);var l=.900316316158*this.a*a*Math.cos(n)+this.x0,u=1.4142135623731*this.a*Math.sin(n)+this.y0;return s.x=l,s.y=u,s},inverse:function(s){var i,e;s.x-=this.x0,s.y-=this.y0,e=s.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),i=Math.asin(e);var a=t.adjust_lon(this.long0+s.x/(.900316316158*this.a*Math.cos(i)));a<-t.PI&&(a=-t.PI),a>t.PI&&(a=t.PI),e=(2*i+Math.sin(2*i))/t.PI,Math.abs(e)>1&&(e=1);var n=Math.asin(e);return s.x=a,s.y=n,s}}}),define("proj4/projCode/eqdc",["../common"],function(t){return{init:function(){return Math.abs(this.lat1+this.lat2)<t.EPSLN?(t.reportError("eqdc:init: Equal Latitudes"),void 0):(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=t.e0fn(this.es),this.e1=t.e1fn(this.es),this.e2=t.e2fn(this.es),this.e3=t.e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=t.msfnz(this.e,this.sinphi,this.cosphi),this.ml1=t.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<t.EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=t.msfnz(this.e,this.sinphi,this.cosphi),this.ml2=t.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=t.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0),void 0)},forward:function(s){var i,e=s.x,a=s.y;if(this.sphere)i=this.a*(this.g-a);else{var n=t.mlfn(this.e0,this.e1,this.e2,this.e3,a);i=this.a*(this.g-n)}var r=this.ns*t.adjust_lon(e-this.long0),h=this.x0+i*Math.sin(r),o=this.y0+this.rh-i*Math.cos(r);return s.x=h,s.y=o,s},inverse:function(s){s.x-=this.x0,s.y=this.rh-s.y+this.y0;var i,e,a,n;this.ns>=0?(e=Math.sqrt(s.x*s.x+s.y*s.y),i=1):(e=-Math.sqrt(s.x*s.x+s.y*s.y),i=-1);var r=0;if(0!==e&&(r=Math.atan2(i*s.x,i*s.y)),this.sphere)return n=t.adjust_lon(this.long0+r/this.ns),a=t.adjust_lat(this.g-e/this.a),s.x=n,s.y=a,s;var h=this.g-e/this.a;return a=t.imlfn(h,this.e0,this.e1,this.e2,this.e3),n=t.adjust_lon(this.long0+r/this.ns),s.x=n,s.y=a,s}}}),define("proj4/projCode/vandg",["../common"],function(t){return{init:function(){this.R=this.a},forward:function(s){var i,e,a=s.x,n=s.y,r=t.adjust_lon(a-this.long0);Math.abs(n)<=t.EPSLN&&(i=this.x0+this.R*r,e=this.y0);var h=t.asinz(2*Math.abs(n/t.PI));(Math.abs(r)<=t.EPSLN||Math.abs(Math.abs(n)-t.HALF_PI)<=t.EPSLN)&&(i=this.x0,e=n>=0?this.y0+t.PI*this.R*Math.tan(.5*h):this.y0+t.PI*this.R*-Math.tan(.5*h));var o=.5*Math.abs(t.PI/r-r/t.PI),l=o*o,u=Math.sin(h),f=Math.cos(h),c=f/(u+f-1),d=c*c,p=c*(2/u-1),m=p*p,M=t.PI*this.R*(o*(c-m)+Math.sqrt(l*(c-m)*(c-m)-(m+l)*(d-m)))/(m+l);0>r&&(M=-M),i=this.x0+M;var g=l+c;return M=t.PI*this.R*(p*g-o*Math.sqrt((m+l)*(l+1)-g*g))/(m+l),e=n>=0?this.y0+M:this.y0-M,s.x=i,s.y=e,s},inverse:function(s){var i,e,a,n,r,h,o,l,u,f,c,d,p;return s.x-=this.x0,s.y-=this.y0,c=t.PI*this.R,a=s.x/c,n=s.y/c,r=a*a+n*n,h=-Math.abs(n)*(1+r),o=h-2*n*n+a*a,l=-2*h+1+2*n*n+r*r,p=n*n/l+(2*o*o*o/l/l/l-9*h*o/l/l)/27,u=(h-o*o/3/l)/l,f=2*Math.sqrt(-u/3),c=3*p/u/f,Math.abs(c)>1&&(c=c>=0?1:-1),d=Math.acos(c)/3,e=s.y>=0?(-f*Math.cos(d+t.PI/3)-o/3/l)*t.PI:-(-f*Math.cos(d+t.PI/3)-o/3/l)*t.PI,i=Math.abs(a)<t.EPSLN?this.long0:t.adjust_lon(this.long0+t.PI*(r-1+Math.sqrt(1+2*(a*a-n*n)+r*r))/2/a),s.x=i,s.y=e,s}}}),define("proj4/projCode/aeqd",["../common"],function(t){return{init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(s){var i,e,a,n,r,h,o,l,u,f,c,d,p,m,M,g,_,y,v,b,x,C,P,S=s.x,A=s.y,I=Math.sin(s.y),w=Math.cos(s.y),E=t.adjust_lon(S-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=t.EPSLN?(s.x=this.x0+this.a*(t.HALF_PI-A)*Math.sin(E),s.y=this.y0-this.a*(t.HALF_PI-A)*Math.cos(E),s):Math.abs(this.sin_p12+1)<=t.EPSLN?(s.x=this.x0+this.a*(t.HALF_PI+A)*Math.sin(E),s.y=this.y0+this.a*(t.HALF_PI+A)*Math.cos(E),s):(y=this.sin_p12*I+this.cos_p12*w*Math.cos(E),g=Math.acos(y),_=g/Math.sin(g),s.x=this.x0+this.a*_*w*Math.sin(E),s.y=this.y0+this.a*_*(this.cos_p12*I-this.sin_p12*w*Math.cos(E)),s):(i=t.e0fn(this.es),e=t.e1fn(this.es),a=t.e2fn(this.es),n=t.e3fn(this.es),Math.abs(this.sin_p12-1)<=t.EPSLN?(r=this.a*t.mlfn(i,e,a,n,t.HALF_PI),h=this.a*t.mlfn(i,e,a,n,A),s.x=this.x0+(r-h)*Math.sin(E),s.y=this.y0-(r-h)*Math.cos(E),s):Math.abs(this.sin_p12+1)<=t.EPSLN?(r=this.a*t.mlfn(i,e,a,n,t.HALF_PI),h=this.a*t.mlfn(i,e,a,n,A),s.x=this.x0+(r+h)*Math.sin(E),s.y=this.y0+(r+h)*Math.cos(E),s):(o=I/w,l=t.gN(this.a,this.e,this.sin_p12),u=t.gN(this.a,this.e,I),f=Math.atan((1-this.es)*o+this.es*l*this.sin_p12/(u*w)),c=Math.atan2(Math.sin(E),this.cos_p12*Math.tan(f)-this.sin_p12*Math.cos(E)),v=0===c?Math.asin(this.cos_p12*Math.sin(f)-this.sin_p12*Math.cos(f)):Math.abs(Math.abs(c)-t.PI)<=t.EPSLN?-Math.asin(this.cos_p12*Math.sin(f)-this.sin_p12*Math.cos(f)):Math.asin(Math.sin(E)*Math.cos(f)/Math.sin(c)),d=this.e*this.sin_p12/Math.sqrt(1-this.es),p=this.e*this.cos_p12*Math.cos(c)/Math.sqrt(1-this.es),m=d*p,M=p*p,b=v*v,x=b*v,C=x*v,P=C*v,g=l*v*(1-b*M*(1-M)/6+x/8*m*(1-2*M)+C/120*(M*(4-7*M)-3*d*d*(1-7*M))-P/48*m),s.x=this.x0+g*Math.sin(c),s.y=this.y0+g*Math.cos(c),s))},inverse:function(s){s.x-=this.x0,s.y-=this.y0;var i,e,a,n,r,h,o,l,u,f,c,d,p,m,M,g,_,y,v,b,x,C,P;if(this.sphere){if(i=Math.sqrt(s.x*s.x+s.y*s.y),i>2*t.HALF_PI*this.a)return;return e=i/this.a,a=Math.sin(e),n=Math.cos(e),r=this.long0,Math.abs(i)<=t.EPSLN?h=this.lat0:(h=t.asinz(n*this.sin_p12+s.y*a*this.cos_p12/i),o=Math.abs(this.lat0)-t.HALF_PI,r=Math.abs(o)<=t.EPSLN?this.lat0>=0?t.adjust_lon(this.long0+Math.atan2(s.x,-s.y)):t.adjust_lon(this.long0-Math.atan2(-s.x,s.y)):t.adjust_lon(this.long0+Math.atan2(s.x*a,i*this.cos_p12*n-s.y*this.sin_p12*a))),s.x=r,s.y=h,s}return l=t.e0fn(this.es),u=t.e1fn(this.es),f=t.e2fn(this.es),c=t.e3fn(this.es),Math.abs(this.sin_p12-1)<=t.EPSLN?(d=this.a*t.mlfn(l,u,f,c,t.HALF_PI),i=Math.sqrt(s.x*s.x+s.y*s.y),p=d-i,h=t.imlfn(p/this.a,l,u,f,c),r=t.adjust_lon(this.long0+Math.atan2(s.x,-1*s.y)),s.x=r,s.y=h,s):Math.abs(this.sin_p12+1)<=t.EPSLN?(d=this.a*t.mlfn(l,u,f,c,t.HALF_PI),i=Math.sqrt(s.x*s.x+s.y*s.y),p=i-d,h=t.imlfn(p/this.a,l,u,f,c),r=t.adjust_lon(this.long0+Math.atan2(s.x,s.y)),s.x=r,s.y=h,s):(i=Math.sqrt(s.x*s.x+s.y*s.y),g=Math.atan2(s.x,s.y),m=t.gN(this.a,this.e,this.sin_p12),_=Math.cos(g),y=this.e*this.cos_p12*_,v=-y*y/(1-this.es),b=3*this.es*(1-v)*this.sin_p12*this.cos_p12*_/(1-this.es),x=i/m,C=x-v*(1+v)*Math.pow(x,3)/6-b*(1+3*v)*Math.pow(x,4)/24,P=1-v*C*C/2-x*C*C*C/6,M=Math.asin(this.sin_p12*Math.cos(C)+this.cos_p12*Math.sin(C)*_),r=t.adjust_lon(this.long0+Math.asin(Math.sin(g)*Math.sin(C)/Math.cos(M))),h=Math.atan((1-this.es*P*this.sin_p12/Math.sin(M))*Math.tan(M)/(1-this.es)),s.x=r,s.y=h,s)}}}),define("proj4/projections",["require","exports","module","./projCode/longlat","./projCode/tmerc","./projCode/utm","./projCode/sterea","./projCode/somerc","./projCode/omerc","./projCode/lcc","./projCode/krovak","./projCode/cass","./projCode/laea","./projCode/merc","./projCode/aea","./projCode/gnom","./projCode/cea","./projCode/eqc","./projCode/poly","./projCode/nzmg","./projCode/mill","./projCode/sinu","./projCode/moll","./projCode/eqdc","./projCode/vandg","./projCode/aeqd","./projCode/longlat"],function(t,s){s.longlat=t("./projCode/longlat"),s.identity=s.longlat,s.tmerc=t("./projCode/tmerc"),s.utm=t("./projCode/utm"),s.sterea=t("./projCode/sterea"),s.somerc=t("./projCode/somerc"),s.omerc=t("./projCode/omerc"),s.lcc=t("./projCode/lcc"),s.krovak=t("./projCode/krovak"),s.cass=t("./projCode/cass"),s.laea=t("./projCode/laea"),s.merc=t("./projCode/merc"),s.aea=t("./projCode/aea"),s.gnom=t("./projCode/gnom"),s.cea=t("./projCode/cea"),s.eqc=t("./projCode/eqc"),s.poly=t("./projCode/poly"),s.nzmg=t("./projCode/nzmg"),s.mill=t("./projCode/mill"),s.sinu=t("./projCode/sinu"),s.moll=t("./projCode/moll"),s.eqdc=t("./projCode/eqdc"),s.vandg=t("./projCode/vandg"),s.aeqd=t("./projCode/aeqd"),s.longlat=t("./projCode/longlat"),s.identity=s.longlat}),define("proj4/wkt",["./extend","./constants","./common"],function(t,s,i){function e(s,i,e){s[i]=e.map(function(t){var s={};return a(t,s),s}).reduce(function(s,i){return t(s,i)},{})}function a(t,s){var i;return Array.isArray(t)?(i=t.shift(),"PARAMETER"===i&&(i=t.shift()),1===t.length?Array.isArray(t[0])?(s[i]={},a(t[0],s[i])):s[i]=t[0]:t.length?"TOWGS84"===i?s[i]=t:(s[i]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(i)>-1?(s[i]={name:t[0].toLowerCase(),convert:t[1]},3===t.length&&(s[i].auth=t[2])):"SPHEROID"===i?(s[i]={name:t[0],a:t[1],rf:t[2]},4===t.length&&(s[i].auth=t[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(i)>-1?(t[0]=["name",t[0]],e(s,i,t)):t.every(function(t){return Array.isArray(t)})?e(s,i,t):a(t,s[i])):s[i]=!0,void 0):(s[t]=!0,void 0)}function n(t,s){var i=s[0],e=s[1];!(i in t)&&e in t&&(t[i]=t[e],3===s.length&&(t[i]=s[2](t[i])))}function r(t){return t*i.D2R}function h(t){function i(s){var i=t.to_meter||1;return parseFloat(s,10)*i}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):t.projName=s.wktProjections[t.PROJECTION],t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&(t.to_meter=parseFloat(t.UNIT.convert,10))),t.GEOGCS&&(t.datumCode=t.GEOGCS.DATUM?t.GEOGCS.DATUM.name.toLowerCase():t.GEOGCS.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===t.datumCode||"new_zealand_1949"===t.datumCode)&&(t.datumCode="nzgd49"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),t.GEOGCS.DATUM&&t.GEOGCS.DATUM.SPHEROID&&(t.ellps=t.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=t.GEOGCS.DATUM.SPHEROID.a,t.rf=parseFloat(t.GEOGCS.DATUM.SPHEROID.rf,10))),t.b&&!isFinite(t.b)&&(t.b=t.a);
var e=n.bind(null,t),a=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",r],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",r],["x0","false_easting",i],["y0","false_northing",i],["long0","central_meridian",r],["lat0","latitude_of_origin",r],["lat0","standard_parallel_1",r],["lat1","standard_parallel_1",r],["lat2","standard_parallel_2",r],["alpha","azimuth",r],["srsCode","name"]];a.forEach(e),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.PROJECTION&&"Lambert_Azimuthal_Equal_Area"!==t.PROJECTION||(t.long0=t.longc)}return function(s,i){var e=JSON.parse((","+s).replace(/\,([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\,([A-Z_0-9]+?)\]/g,',"$1"]')),n=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",n]),e.unshift("output");var o={};return a(e,o),h(o.output),t(i,o.output)}}),define("proj4/Proj",["./extend","./common","./defs","./constants","./datum","./projections","./wkt","./projString"],function(t,s,i,e,a,n,r,h){var o=function l(s){if(!(this instanceof l))return new l(s);this.srsCodeInput=s;var e;"string"==typeof s?s in i?(this.deriveConstants(i[s]),t(this,i[s])):s.indexOf("GEOGCS")>=0||s.indexOf("GEOCCS")>=0||s.indexOf("PROJCS")>=0||s.indexOf("LOCAL_CS")>=0?(e=r(s),this.deriveConstants(e),t(this,e)):"+"===s[0]&&(e=h(s),this.deriveConstants(e),t(this,e)):(this.deriveConstants(s),t(this,s)),this.initTransforms(this.projName)};return o.prototype={initTransforms:function(s){if(!(s in o.projections))throw"unknown projection "+s;t(this,o.projections[s]),this.init()},deriveConstants:function(i){if(i.nadgrids&&0===i.nadgrids.length&&(i.nadgrids=null),i.nadgrids){i.grids=i.nadgrids.split(",");var n=null,r=i.grids.length;if(r>0)for(var h=0;r>h;h++){n=i.grids[h];var o=n.split("@");""!==o[o.length-1]&&(i.grids[h]={mandatory:1===o.length,name:o[o.length-1],grid:e.grids[o[o.length-1]]},i.grids[h].mandatory&&!i.grids[h].grid)}}if(i.datumCode&&"none"!==i.datumCode){var l=e.Datum[i.datumCode];l&&(i.datum_params=l.towgs84?l.towgs84.split(","):null,i.ellps=l.ellipse,i.datumName=l.datumName?l.datumName:i.datumCode)}if(!i.a){var u=e.Ellipsoid[i.ellps]?e.Ellipsoid[i.ellps]:e.Ellipsoid.WGS84;t(i,u)}i.rf&&!i.b&&(i.b=(1-1/i.rf)*i.a),(0===i.rf||Math.abs(i.a-i.b)<s.EPSLN)&&(i.sphere=!0,i.b=i.a),i.a2=i.a*i.a,i.b2=i.b*i.b,i.es=(i.a2-i.b2)/i.a2,i.e=Math.sqrt(i.es),i.R_A&&(i.a*=1-i.es*(s.SIXTH+i.es*(s.RA4+i.es*s.RA6)),i.a2=i.a*i.a,i.b2=i.b*i.b,i.es=0),i.ep2=(i.a2-i.b2)/i.b2,i.k0||(i.k0=1),i.axis||(i.axis="enu"),i.datum=a(i)}},o.projections=n,o}),define("proj4/datum_transform",["./common"],function(t){return function(s,i,e){function a(s){return s===t.PJD_3PARAM||s===t.PJD_7PARAM}var n,r,h;if(s.compare_datums(i))return e;if(s.datum_type===t.PJD_NODATUM||i.datum_type===t.PJD_NODATUM)return e;var o=s.a,l=s.es,u=i.a,f=i.es,c=s.datum_type;if(c===t.PJD_GRIDSHIFT)if(0===this.apply_gridshift(s,0,e))s.a=t.SRS_WGS84_SEMIMAJOR,s.es=t.SRS_WGS84_ESQUARED;else{if(!s.datum_params)return s.a=o,s.es=s.es,e;for(n=1,r=0,h=s.datum_params.length;h>r;r++)n*=s.datum_params[r];if(0===n)return s.a=o,s.es=s.es,e;c=s.datum_params.length>3?t.PJD_7PARAM:t.PJD_3PARAM}return i.datum_type===t.PJD_GRIDSHIFT&&(i.a=t.SRS_WGS84_SEMIMAJOR,i.es=t.SRS_WGS84_ESQUARED),(s.es!==i.es||s.a!==i.a||a(c)||a(i.datum_type))&&(s.geodetic_to_geocentric(e),a(s.datum_type)&&s.geocentric_to_wgs84(e),a(i.datum_type)&&i.geocentric_from_wgs84(e),i.geocentric_to_geodetic(e)),i.datum_type===t.PJD_GRIDSHIFT&&this.apply_gridshift(i,1,e),s.a=o,s.es=l,i.a=u,i.es=f,e}}),define("proj4/adjust_axis",[],function(){return function(t,s,i){var e,a,n,r=i.x,h=i.y,o=i.z||0;for(n=0;3>n;n++)if(!s||2!==n||void 0!==i.z)switch(0===n?(e=r,a="x"):1===n?(e=h,a="y"):(e=o,a="z"),t.axis[n]){case"e":i[a]=e;break;case"w":i[a]=-e;break;case"n":i[a]=e;break;case"s":i[a]=-e;break;case"u":void 0!==i[a]&&(i.z=e);break;case"d":void 0!==i[a]&&(i.z=-e);break;default:return null}return i}}),define("proj4/transform",["./common","./datum_transform","./adjust_axis","./Proj"],function(t,s,i,e){return function(a,n,r){function h(s,i){return(s.datum.datum_type===t.PJD_3PARAM||s.datum.datum_type===t.PJD_7PARAM)&&"WGS84"!==i.datumCode}var o;return a.datum&&n.datum&&(h(a,n)||h(n,a))&&(o=new e("WGS84"),this.transform(a,o,r),a=o),"enu"!==a.axis&&i(a,!1,r),"longlat"===a.projName?(r.x*=t.D2R,r.y*=t.D2R):(a.to_meter&&(r.x*=a.to_meter,r.y*=a.to_meter),a.inverse(r)),a.from_greenwich&&(r.x+=a.from_greenwich),r=s(a.datum,n.datum,r),n.from_greenwich&&(r.x-=n.from_greenwich),"longlat"===n.projName?(r.x*=t.R2D,r.y*=t.R2D):(n.forward(r),n.to_meter&&(r.x/=n.to_meter,r.y/=n.to_meter)),"enu"!==n.axis&&i(n,!0,r),r}}),define("proj4/core",["./Point","./Proj","./transform"],function(t,s,i){var e=s("WGS84");return function(a,n,r){var h=function(s,e,r){var h;return Array.isArray(r)?(h=i(s,e,t(r)),3===r.length?[h.x,h.y,h.z]:[h.x,h.y]):i(a,n,r)};return a=a instanceof s?a:s(a),"undefined"==typeof n?(n=a,a=e):"string"==typeof n?n=s(n):"x"in n||Array.isArray(n)?(r=n,n=a,a=e):n=n instanceof s?n:s(n),r?h(a,n,r):{forward:function(t){return h(a,n,t)},inverse:function(t){return h(n,a,t)}}}}),define("proj4",["proj4/core","proj4/Proj","proj4/Point","proj4/defs","proj4/transform","proj4/mgrs"],function(t,s,i,e,a,n){return t.defaultDatum="WGS84",t.Proj=s,t.WGS84=new t.Proj("WGS84"),t.Point=i,t.defs=e,t.transform=a,t.mgrs=n,t}),define("shp/unzip",[],function(){var t=function(t,s){this.files={},this.root="",t&&this.load(t,s)};t.signature={LOCAL_FILE_HEADER:"PK",CENTRAL_FILE_HEADER:"PK",CENTRAL_DIRECTORY_END:"PK",ZIP64_CENTRAL_DIRECTORY_LOCATOR:"PK",ZIP64_CENTRAL_DIRECTORY_END:"PK",DATA_DESCRIPTOR:"PK\b"},t.defaults={base64:!1,binary:!1,dir:!1,date:null,compression:null},t.prototype=function(){var i=function(t,s,i){this.name=t,this.data=s,this.options=i};i.prototype={asText:function(){var i=this.data;return null===i||"undefined"==typeof i?"":(this.options.base64&&(i=s.decode(i)),this.options.binary&&(i=t.prototype.utf8decode(i)),i)},asBinary:function(){var i=this.data;return null===i||"undefined"==typeof i?"":(this.options.base64&&(i=s.decode(i)),this.options.binary||(i=t.prototype.utf8encode(i)),i)},asUint8Array:function(){return t.utils.string2Uint8Array(this.asBinary())},asArrayBuffer:function(){return t.utils.string2Uint8Array(this.asBinary()).buffer}};var e=function(t,s){var i,e="";for(i=0;s>i;i++)e+=String.fromCharCode(255&t),t>>>=8;return e},a=function(){var t,s,i={};for(t=0;t<arguments.length;t++)for(s in arguments[t])arguments[t].hasOwnProperty(s)&&"undefined"==typeof i[s]&&(i[s]=arguments[t][s]);return i},n=function(s){return s=s||{},s.base64===!0&&null==s.binary&&(s.binary=!0),s=a(s,t.defaults),s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),s},r=function(s,e,a){var r=h(s);if(r&&o.call(this,r),a=n(a),a.dir||null===e||"undefined"==typeof e)a.base64=!1,a.binary=!1,e=null;else if(t.support.uint8array&&e instanceof Uint8Array)a.base64=!1,a.binary=!0,e=t.utils.uint8Array2String(e);else if(t.support.arraybuffer&&e instanceof ArrayBuffer){a.base64=!1,a.binary=!0;var l=new Uint8Array(e);e=t.utils.uint8Array2String(l)}else a.binary&&!a.base64&&(a.optimizedBinaryString!==!0&&(e=t.utils.string2binary(e)),delete a.optimizedBinaryString);return this.files[s]=new i(s,e,a)},h=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var s=t.lastIndexOf("/");return s>0?t.substring(0,s):""},o=function(t){if("/"!=t.slice(-1)&&(t+="/"),!this.files[t]){var s=h(t);s&&o.call(this,s),r.call(this,t,null,{dir:!0})}return this.files[t]},l=function(s,i,a){var n,r,h=i!==s.name,o=s.asBinary(),l=s.options;n=l.date.getHours(),n<<=6,n|=l.date.getMinutes(),n<<=5,n|=l.date.getSeconds()/2,r=l.date.getFullYear()-1980,r<<=4,r|=l.date.getMonth()+1,r<<=5,r|=l.date.getDate();var u=null!==o&&0!==o.length;if(a=l.compression||a,!t.compressions[a])throw a+" is not a valid compression method !";var f=t.compressions[a],c=u?f.compress(o):"",d="";return d+="\n\0",d+=h?"\0\b":"\0\0",d+=u?f.magic:t.compressions.STORE.magic,d+=e(n,2),d+=e(r,2),d+=u?e(this.crc32(o),4):"\0\0\0\0",d+=u?e(c.length,4):"\0\0\0\0",d+=u?e(o.length,4):"\0\0\0\0",d+=e(i.length,2),d+="\0\0",{header:d,compressedData:c}};return{load:function(){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(t){var s,e,n,r,h=[];for(s in this.files)this.files.hasOwnProperty(s)&&(n=this.files[s],r=new i(n.name,n.data,a(n.options)),e=s.slice(this.root.length,s.length),s.slice(0,this.root.length)===this.root&&t(e,r)&&h.push(r));return h},file:function(t,s,i){if(1===arguments.length){if(t instanceof RegExp){var e=t;return this.filter(function(t,s){return!s.options.dir&&e.test(t)})}return this.filter(function(s,i){return!i.options.dir&&s===t})[0]||null}return t=this.root+t,r.call(this,t,s,i),this},folder:function(t){if(!t)return this;if(t instanceof RegExp)return this.filter(function(s,i){return i.options.dir&&t.test(s)});var s=this.root+t,i=o.call(this,s),e=this.clone();return e.root=i.name,e},remove:function(t){t=this.root+t;var s=this.files[t];if(s||("/"!=t.slice(-1)&&(t+="/"),s=this.files[t]),s)if(s.options.dir)for(var i=this.filter(function(s,i){return i.name.slice(0,t.length)===t}),e=0;e<i.length;e++)delete this.files[i[e].name];else delete this.files[t];return this},generate:function(i){i=a(i||{},{base64:!0,compression:"STORE",type:"base64"});var n=i.compression.toUpperCase();if(!t.compressions[n])throw n+" is not a valid compression method !";var r=[],h=[],o=0;for(var u in this.files)if(this.files.hasOwnProperty(u)){var f=this.files[u],c=this.utf8encode(f.name),d="",p="",m=l.call(this,f,c,n);d=t.signature.LOCAL_FILE_HEADER+m.header+c+m.compressedData,p=t.signature.CENTRAL_FILE_HEADER+"\0"+m.header+"\0\0"+"\0\0"+"\0\0"+(this.files[u].options.dir===!0?"\0\0\0":"\0\0\0\0")+e(o,4)+c,o+=d.length,h.push(d),r.push(p)}var M=h.join(""),g=r.join(""),_="";_=t.signature.CENTRAL_DIRECTORY_END+"\0\0"+"\0\0"+e(h.length,2)+e(h.length,2)+e(g.length,4)+e(M.length,4)+"\0\0";var y=M+g+_;switch(i.type.toLowerCase()){case"uint8array":return t.utils.string2Uint8Array(y);case"arraybuffer":return t.utils.string2Uint8Array(y).buffer;case"blob":return t.utils.string2Blob(y);case"base64":return i.base64?s.encode(y):y;default:return y}},crc32:function(t,s){if(""===t||"undefined"==typeof t)return 0;var i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"==typeof s&&(s=0);var e=0,a=0;s=-1^s;for(var n=0,r=t.length;r>n;n++)a=255&(s^t.charCodeAt(n)),e=i[a],s=s>>>8^e;return-1^s},clone:function(){var s=new t;for(var i in this)"function"!=typeof this[i]&&(s[i]=this[i]);return s},utf8encode:function(t){for(var s="",i=0;i<t.length;i++){var e=t.charCodeAt(i);128>e?s+=String.fromCharCode(e):e>127&&2048>e?(s+=String.fromCharCode(192|e>>6),s+=String.fromCharCode(128|63&e)):(s+=String.fromCharCode(224|e>>12),s+=String.fromCharCode(128|63&e>>6),s+=String.fromCharCode(128|63&e))}return s},utf8decode:function(t){for(var s="",i=0,e=0,a=0,n=0;i<t.length;)e=t.charCodeAt(i),128>e?(s+=String.fromCharCode(e),i++):e>191&&224>e?(a=t.charCodeAt(i+1),s+=String.fromCharCode((31&e)<<6|63&a),i+=2):(a=t.charCodeAt(i+1),n=t.charCodeAt(i+2),s+=String.fromCharCode((15&e)<<12|(63&a)<<6|63&n),i+=3);return s}}}(),t.compressions={STORE:{magic:"\0\0",compress:function(t){return t},uncompress:function(t){return t}}},t.support={arraybuffer:function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array}(),uint8array:function(){return"undefined"!=typeof Uint8Array}(),blob:function(){if("undefined"==typeof ArrayBuffer)return!1;var t=new ArrayBuffer(0);try{return 0===new Blob([t],{type:"application/zip"}).size}catch(s){}try{var i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return i.append(t),0===i.getBlob("application/zip").size}catch(s){}return!1}()},t.utils={string2binary:function(t){for(var s="",i=0;i<t.length;i++)s+=String.fromCharCode(255&t.charCodeAt(i));return s},string2Uint8Array:function(s){if(!t.support.uint8array)throw new Error("Uint8Array is not supported by this browser");for(var i=new ArrayBuffer(s.length),e=new Uint8Array(i),a=0;a<s.length;a++)e[a]=s.charCodeAt(a);return e},uint8Array2String:function(s){if(!t.support.uint8array)throw new Error("Uint8Array is not supported by this browser");for(var i="",e=0;e<s.length;e++)i+=String.fromCharCode(s[e]);return i},string2Blob:function(s){if(!t.support.blob)throw new Error("Blob is not supported by this browser");var i=t.utils.string2Uint8Array(s).buffer;try{return new Blob([i],{type:"application/zip"})}catch(e){}try{var a=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return a.append(i),a.getBlob("application/zip")}catch(e){}throw new Error("Bug : can't construct the Blob.")}};var s=function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(s){for(var i,e,a,n,r,h,o,l="",u=0;u<s.length;)i=s.charCodeAt(u++),e=s.charCodeAt(u++),a=s.charCodeAt(u++),n=i>>2,r=(3&i)<<4|e>>4,h=(15&e)<<2|a>>6,o=63&a,isNaN(e)?h=o=64:isNaN(a)&&(o=64),l=l+t.charAt(n)+t.charAt(r)+t.charAt(h)+t.charAt(o);return l},decode:function(s){var i,e,a,n,r,h,o,l="",u=0;for(s=s.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<s.length;)n=t.indexOf(s.charAt(u++)),r=t.indexOf(s.charAt(u++)),h=t.indexOf(s.charAt(u++)),o=t.indexOf(s.charAt(u++)),i=n<<2|r>>4,e=(15&r)<<4|h>>2,a=(3&h)<<6|o,l+=String.fromCharCode(i),64!=h&&(l+=String.fromCharCode(e)),64!=o&&(l+=String.fromCharCode(a));return l}}}();if(function(){function i(s){if(this.stream="",t.support.uint8array&&s instanceof Uint8Array)this.stream=t.utils.uint8Array2String(s);else if(t.support.arraybuffer&&s instanceof ArrayBuffer){var i=new Uint8Array(s);this.stream=t.utils.uint8Array2String(i)}else this.stream=t.utils.string2binary(s);this.index=0}function e(t,s){this.options=t,this.loadOptions=s}function a(t,s){this.files=[],this.loadOptions=s,t&&this.load(t)}var n=65535,r=-1,h=function(t){var s,i,e="";for(i=0;i<(t||"").length;i++)s=t.charCodeAt(i),e+="\\x"+(16>s?"0":"")+s.toString(16).toUpperCase();return e},o=function(s){for(var i in t.compressions)if(t.compressions.hasOwnProperty(i)&&t.compressions[i].magic===s)return t.compressions[i];return null};i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.stream.length<t||0>t)throw new Error("End of stream reached (stream length = "+this.stream.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){return this.stream.charCodeAt(t)},readInt:function(t){var s,i=0;for(this.checkOffset(t),s=this.index+t-1;s>=this.index;s--)i=(i<<8)+this.byteAt(s);return this.index+=t,i},readString:function(t){this.checkOffset(t);var s=this.stream.slice(this.index,this.index+t);return this.index+=t,s},readDate:function(){var t=this.readInt(4);return new Date((127&t>>25)+1980,(15&t>>21)-1,31&t>>16,31&t>>11,63&t>>5,(31&t)<<1)}},e.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},readLocalPart:function(s){var i,e;if(s.skip(22),this.fileNameLength=s.readInt(2),e=s.readInt(2),this.fileName=s.readString(this.fileNameLength),s.skip(e),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(this.compressedFileData=s.readString(this.compressedSize),i=o(this.compressionMethod),null===i)throw new Error("Corrupted zip : compression "+h(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.uncompressedFileData=i.uncompress(this.compressedFileData),this.uncompressedFileData.length!==this.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch");if(this.loadOptions.checkCRC32&&t.prototype.crc32(this.uncompressedFileData)!==this.crc32)throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(t){if(this.versionMadeBy=t.readString(2),this.versionNeeded=t.readInt(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4),this.fileNameLength=t.readInt(2),this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=t.readString(this.fileNameLength),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readString(this.fileCommentLength),this.dir=16&this.externalFileAttributes?!0:!1},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=new i(this.extraFields[1].value);this.uncompressedSize===r&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===r&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===r&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===r&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var s,i,e,a=t.index;for(this.extraFields=this.extraFields||{};t.index<a+this.extraFieldsLength;)s=t.readInt(2),i=t.readInt(2),e=t.readString(i),this.extraFields[s]={id:s,length:i,value:e}},handleUTF8:function(){this.useUTF8()&&(this.fileName=t.prototype.utf8decode(this.fileName),this.fileComment=t.prototype.utf8decode(this.fileComment))}},a.prototype={checkSignature:function(t){var s=this.reader.readString(4);if(s!==t)throw new Error("Corrupted zip or bug : unexpected signature ("+h(s)+", expected "+h(t)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,s,i,e=this.zip64EndOfCentralSize-44,a=0;e>a;)t=this.reader.readInt(2),s=this.reader.readInt(4),i=this.reader.readString(s),this.zip64ExtensibleData[t]={id:t,length:s,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var s,i;for(s=0;s<this.files.length;s++)i=this.files[s],this.reader.setIndex(i.localHeaderOffset),this.checkSignature(t.signature.LOCAL_FILE_HEADER),i.readLocalPart(this.reader),i.handleUTF8()},readCentralDir:function(){var s;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===t.signature.CENTRAL_FILE_HEADER;)s=new e({zip64:this.zip64},this.loadOptions),s.readCentralPart(this.reader),this.files.push(s)},readEndOfCentral:function(){var s=this.reader.stream.lastIndexOf(t.signature.CENTRAL_DIRECTORY_END);if(-1===s)throw new Error("Corrupted zip : can't find end of central directory");if(this.reader.setIndex(s),this.checkSignature(t.signature.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n||this.diskWithCentralDirStart===n||this.centralDirRecordsOnThisDisk===n||this.centralDirRecords===n||this.centralDirSize===r||this.centralDirOffset===r){if(this.zip64=!0,s=this.reader.stream.lastIndexOf(t.signature.ZIP64_CENTRAL_DIRECTORY_LOCATOR),-1===s)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(s),this.checkSignature(t.signature.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(t.signature.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},load:function(t){this.reader=new i(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.prototype.load=function(t,i){var e,n,r,h;for(i=i||{},i.base64&&(t=s.decode(t)),n=new a(t,i),e=n.files,r=0;r<e.length;r++)h=e[r],this.file(h.fileName,h.uncompressedFileData,{binary:!0,optimizedBinaryString:!0,date:h.date,dir:h.dir});return this}}(),!t)throw"JSZip not defined";return function(){function s(){this.next=null,this.list=null}function i(){this.e=0,this.b=0,this.n=0,this.t=null}function e(t,e,a,n,r,h){this.BMAX=16,this.N_MAX=288,this.status=0,this.root=null,this.m=0;var o,l,u,f,c,d,p,m,M,g,_,y,v,b,x,C,P,S=new Array(this.BMAX+1),A=new Array(this.BMAX+1),I=new i,w=new Array(this.BMAX),E=new Array(this.N_MAX),N=new Array(this.BMAX+1);for(P=this.root=null,d=0;d<S.length;d++)S[d]=0;for(d=0;d<A.length;d++)A[d]=0;for(d=0;d<w.length;d++)w[d]=null;for(d=0;d<E.length;d++)E[d]=0;for(d=0;d<N.length;d++)N[d]=0;l=e>256?t[256]:this.BMAX,M=t,g=0,d=e;do S[M[g]]++,g++;while(--d>0);if(S[0]==e)return this.root=null,this.m=0,this.status=0,void 0;for(p=1;p<=this.BMAX&&0==S[p];p++);for(m=p,p>h&&(h=p),d=this.BMAX;0!=d&&0==S[d];d--);for(f=d,h>d&&(h=d),b=1<<p;d>p;p++,b<<=1)if((b-=S[p])<0)return this.status=2,this.m=h,void 0;if((b-=S[d])<0)return this.status=2,this.m=h,void 0;for(S[d]+=b,N[1]=p=0,M=S,g=1,v=2;--d>0;)N[v++]=p+=M[g++];M=t,g=0,d=0;do 0!=(p=M[g++])&&(E[N[p]++]=d);while(++d<e);for(e=N[f],N[0]=d=0,M=E,g=0,c=-1,y=A[0]=0,_=null,x=0;f>=m;m++)for(o=S[m];o-->0;){for(;m>y+A[1+c];){if(y+=A[1+c],c++,x=(x=f-y)>h?h:x,(u=1<<(p=m-y))>o+1)for(u-=o+1,v=m;++p<x&&!((u<<=1)<=S[++v]);)u-=S[v];for(y+p>l&&l>y&&(p=l-y),x=1<<p,A[1+c]=p,_=new Array(x),C=0;x>C;C++)_[C]=new i;P=null==P?this.root=new s:P.next=new s,P.next=null,P.list=_,w[c]=_,c>0&&(N[c]=d,I.b=A[c],I.e=16+p,I.t=_,p=(d&(1<<y)-1)>>y-A[c],w[c-1][p].e=I.e,w[c-1][p].b=I.b,w[c-1][p].n=I.n,w[c-1][p].t=I.t)}for(I.b=m-y,g>=e?I.e=99:M[g]<a?(I.e=M[g]<256?16:15,I.n=M[g++]):(I.e=r[M[g]-a],I.n=n[M[g++]-a]),u=1<<m-y,p=d>>y;x>p;p+=u)_[p].e=I.e,_[p].b=I.b,_[p].n=I.n,_[p].t=I.t;for(p=1<<m-1;0!=(d&p);p>>=1)d^=p;for(d^=p;(d&(1<<y)-1)!=N[c];)y-=A[c],c--}this.m=A[1],this.status=0!=b&&1!=f?1:0}function a(){return N.length==j?-1:255&N.charCodeAt(j++)}function n(t){for(;t>b;)v|=a()<<b,b+=8}function r(t){return v&F[t]}function h(t){v>>=t,b-=t}function o(t,s,i){var e,a,o;if(0==i)return 0;for(o=0;;){for(n(w),a=A.list[r(w)],e=a.e;e>16;){if(99==e)return-1;h(a.b),e-=16,n(e),a=a.t[r(e)],e=a.e}if(h(a.b),16!=e){if(15==e)break;for(n(e),P=a.n+r(e),h(e),n(E),a=I.list[r(E)],e=a.e;e>16;){if(99==e)return-1;h(a.b),e-=16,n(e),a=a.t[r(e)],e=a.e}for(h(a.b),n(e),S=g-a.n-r(e),h(e);P>0&&i>o;)P--,S&=L-1,g&=L-1,t[s+o++]=M[g++]=M[S++];if(o==i)return i}else if(g&=L-1,t[s+o++]=M[g++]=a.n,o==i)return i}return x=-1,o}function l(t,s,i){var e;if(e=7&b,h(e),n(16),e=r(16),h(16),n(16),e!=(65535&~v))return-1;for(h(16),P=e,e=0;P>0&&i>e;)P--,g&=L-1,n(8),t[s+e++]=M[g++]=r(8),h(8);return 0==P&&(x=-1),e}function u(t,s,i){if(null==D){var a,n,r=new Array(288);for(a=0;144>a;a++)r[a]=8;for(;256>a;a++)r[a]=9;for(;280>a;a++)r[a]=7;for(;288>a;a++)r[a]=8;if(y=7,n=new e(r,288,257,q,z,y),0!=n.status)return alert("HufBuild error: "+n.status),-1;for(D=n.root,y=n.m,a=0;30>a;a++)r[a]=5;if(m=5,n=new e(r,30,0,T,B,m),n.status>1)return D=null,alert("HufBuild error: "+n.status),-1;_=n.root,m=n.m}return A=D,I=_,w=y,E=m,o(t,s,i)}function f(t,s,i){var a,l,u,f,c,d,p,m,M,g=new Array(316);for(a=0;a<g.length;a++)g[a]=0;if(n(5),p=257+r(5),h(5),n(5),m=1+r(5),h(5),n(4),d=4+r(4),h(4),p>286||m>30)return-1;for(l=0;d>l;l++)n(3),g[G[l]]=r(3),h(3);for(;19>l;l++)g[G[l]]=0;if(w=7,M=new e(g,19,19,null,null,w),0!=M.status)return-1;for(A=M.root,w=M.m,f=p+m,a=u=0;f>a;)if(n(w),c=A.list[r(w)],l=c.b,h(l),l=c.n,16>l)g[a++]=u=l;else if(16==l){if(n(2),l=3+r(2),h(2),a+l>f)return-1;for(;l-->0;)g[a++]=u}else if(17==l){if(n(3),l=3+r(3),h(3),a+l>f)return-1;for(;l-->0;)g[a++]=0;u=0}else{if(n(7),l=11+r(7),h(7),a+l>f)return-1;for(;l-->0;)g[a++]=0;u=0}if(w=R,M=new e(g,p,257,q,z,w),0==w&&(M.status=1),0!=M.status)return 1==M.status,-1;for(A=M.root,w=M.m,a=0;m>a;a++)g[a]=g[a+p];return E=O,M=new e(g,m,0,T,B,E),I=M.root,E=M.m,0==E&&p>257?-1:(1==M.status,0!=M.status?-1:o(t,s,i))}function c(){null==M&&(M=new Array(2*L)),g=0,v=0,b=0,x=-1,C=!1,P=S=0,A=null}function d(t,s,i){var e,a;for(e=0;i>e;){if(C&&-1==x)return e;if(P>0){if(x!=k)for(;P>0&&i>e;)P--,S&=L-1,g&=L-1,t[s+e++]=M[g++]=M[S++];else{for(;P>0&&i>e;)P--,g&=L-1,n(8),t[s+e++]=M[g++]=r(8),h(8);0==P&&(x=-1)}if(e==i)return e}if(-1==x){if(C)break;n(1),0!=r(1)&&(C=!0),h(1),n(2),x=r(2),h(2),A=null,P=0}switch(x){case 0:a=l(t,s+e,i-e);break;case 1:a=null!=A?o(t,s+e,i-e):u(t,s+e,i-e);break;case 2:a=null!=A?o(t,s+e,i-e):f(t,s+e,i-e);break;default:a=-1}if(-1==a)return C?0:-1;e+=a}return e}function p(t){var s,i,e,a;for(c(),N=t,j=0,i=new Array(1024),s="";(e=d(i,0,i.length))>0;)for(a=0;e>a;a++)s+=String.fromCharCode(i[a]);return N=null,s}var m,M,g,_,y,v,b,x,C,P,S,A,I,w,E,N,j,L=32768,k=0,R=9,O=6,D=null,F=new Array(0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535),q=new Array(3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0),z=new Array(0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99),T=new Array(1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577),B=new Array(0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13),G=new Array(16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15);t.compressions.DEFLATE?t.compressions.DEFLATE.uncompress=p:t.compressions.DEFLATE={magic:"\b\0",uncompress:p}}(),t}),define("shp/jszip",["./unzip"],function(t){return function(s){var i=new t(s),e=i.file(/.+/),a={};return e.forEach(function(t){a[t.name]="geojson"===t.name.slice(-7).toLowerCase()?t.asText():t.asArrayBuffer()}),a}}),function(global,undefined){function canUseNextTick(){return"object"==typeof process&&"[object process]"===Object.prototype.toString.call(process)}function canUseMessageChannel(){return!!global.MessageChannel}function canUsePostMessage(){if(!global.postMessage||global.importScripts)return!1;var t=!0,s=global.onmessage;return global.onmessage=function(){t=!1},global.postMessage("","*"),global.onmessage=s,t}function canUseReadyStateChange(){return"document"in global&&"onreadystatechange"in global.document.createElement("script")}function installNextTickImplementation(t){t.setImmediate=function(){var t=tasks.addFromSetImmediateArguments(arguments);return process.nextTick(function(){tasks.runIfPresent(t)}),t}}function installMessageChannelImplementation(t){var s=new global.MessageChannel;s.port1.onmessage=function(t){var s=t.data;tasks.runIfPresent(s)},t.setImmediate=function(){var t=tasks.addFromSetImmediateArguments(arguments);return s.port2.postMessage(t),t}}function installPostMessageImplementation(t){function s(t,s){return"string"==typeof t&&t.substring(0,s.length)===s}function i(t){if(t.source===global&&s(t.data,e)){var i=t.data.substring(e.length);tasks.runIfPresent(i)}}var e="com.bn.NobleJS.setImmediate"+Math.random();global.addEventListener?global.addEventListener("message",i,!1):global.attachEvent("onmessage",i),t.setImmediate=function(){var t=tasks.addFromSetImmediateArguments(arguments);return global.postMessage(e+t,"*"),t}}function installReadyStateChangeImplementation(t){t.setImmediate=function(){var t=tasks.addFromSetImmediateArguments(arguments),s=global.document.createElement("script");return s.onreadystatechange=function(){tasks.runIfPresent(t),s.onreadystatechange=null,s.parentNode.removeChild(s),s=null},global.document.documentElement.appendChild(s),t}}function installSetTimeoutImplementation(t){t.setImmediate=function(){var t=tasks.addFromSetImmediateArguments(arguments);return global.setTimeout(function(){tasks.runIfPresent(t)},0),t}}var tasks=function(){function Task(t,s){this.handler=t,this.args=s}Task.prototype.run=function(){if("function"==typeof this.handler)this.handler.apply(undefined,this.args);else{var scriptSource=""+this.handler;eval(scriptSource)}};var nextHandle=1,tasksByHandle={},currentlyRunningATask=!1;return{addFromSetImmediateArguments:function(t){var s=t[0],i=Array.prototype.slice.call(t,1),e=new Task(s,i),a=nextHandle++;return tasksByHandle[a]=e,a},runIfPresent:function(t){if(currentlyRunningATask)global.setTimeout(function(){tasks.runIfPresent(t)},0);else{var s=tasksByHandle[t];if(s){currentlyRunningATask=!0;try{s.run()}finally{delete tasksByHandle[t],currentlyRunningATask=!1}}}},remove:function(t){delete tasksByHandle[t]}}}();if(!global.setImmediate){var attachTo="function"==typeof Object.getPrototypeOf&&"setTimeout"in Object.getPrototypeOf(global)?Object.getPrototypeOf(global):global;
canUseNextTick()?installNextTickImplementation(attachTo):canUsePostMessage()?installPostMessageImplementation(attachTo):canUseMessageChannel()?installMessageChannelImplementation(attachTo):canUseReadyStateChange()?installReadyStateChangeImplementation(attachTo):installSetTimeoutImplementation(attachTo),attachTo.clearImmediate=tasks.remove}}("object"==typeof global&&global?global:this),define("shp/lie",[],function(){function t(){function t(){this.then=function(t,s){return n(t,s)}}var n=function(t,h,o){var l;if(t!==n)return l=s(),n.queue.push({deferred:l,resolve:t,reject:h}),l.promise;for(var u,f,c,d=h?"resolve":"reject",p=0,m=n.queue.length;m>p;p++)u=n.queue[p],f=u.deferred,c=u[d],typeof c!==a?f[d](o):e(c,o,f);n=i(r,o,h)},r=new t;this.promise=r,n.queue=[],this.resolve=function(t){n.queue&&n(n,!0,t)},this.fulfill=this.resolve,this.reject=function(t){n.queue&&n(n,!1,t)}}function s(){return new t}function i(t,i,n){return function(r,h){var o,l=n?r:h;return typeof l!==a?t:(e(l,i,o=s()),o.promise)}}function e(t,s,i){setImmediate(function(){var e;try{e=t(s),e&&typeof e.then===a?e.then(i.resolve,i.reject):i.resolve(e)}catch(n){i.reject(n)}})}var a="function";return s.resolve=function(t){var s={};return s.then=i(s,t,!0),s},s.reject=function(t){var s={};return s.then=i(s,t,!1),s},s.all=function(t){var i=s(),e=t.length,a=0,n=[],r=function(t){return function(s){n[t]=s,a++,a===e&&i.resolve(n)}};return t.forEach(function(t,s){t.then(r(s),function(t){i.reject(t)})}),i.promise},s}),define("shp/binaryajax",["./lie"],function(t){return function(s){function i(){4===a.readyState&&200===a.status&&e.resolve(a.response)}var e=t(),a=new XMLHttpRequest;return a.onreadystatechange=i,a.open("GET",s,!0),a.responseType="arraybuffer",a.send(),e.promise}}),define("shp/parseShp",[],function(){function t(t){for(var s,i,e=0,a=1,n=t.length;n>a;)s=i||t[0],i=t[a],e+=(i[0]-s[0])*(i[1]+s[1]),a++;return e>0}function s(s,i){return t(i)?s.push([i]):s[s.length-1].push(i),s}function i(t,s){return{type:"Point",coordinates:s(t,0)}}function e(t,s){var e=i(t,s);return e.coordinates.push(s(t,16)),e}function a(t,s,i,e){for(var a=[],n=0;i>n;)a.push(e(t,s)),s+=16,n++;return a}function n(t,s,i,e){for(var a=0;i>a;)e[a].push(t.getFloat64(s,!0)),a++,s+=8;return e}function r(t,s,i,e,n,r){for(var h,o,l=[],u=0,f=0;e>u;)u++,i+=4,h=f,f=u===e?n:t.getInt32(i,!0),o=f-h,o&&(l.push(a(t,s,o,r)),s+=o<<4);return l}function h(t,s,i,e){for(var a=0;i>a;)e[a]=n(t,s,e[a].length,e[a]),s+=e[a].length<<3,a++;return e}function o(t,s){var i={};i.bbox=[t.getFloat64(0,!0),t.getFloat64(8,!0),t.getFloat64(16,!0),t.getFloat64(24,!0)];var e=t.getInt32(32,!0),n=36;return 1===e?(i.type="Point",i.coordinates=s(t,n)):(i.type="MultiPoint",i.coordinates=a(t,n,e,s)),i}function l(t,s){var i,e=o(t,s);if("Point"===e.type)return e.coordinates.push(t.getFloat64(72,!0)),e;i=e.coordinates.length;var a=56+(i<<4);return e.coordinates=n(t,a,i,e.coordinates),e}function u(t,s){var i={};i.bbox=[t.getFloat64(0,!0),t.getFloat64(8,!0),t.getFloat64(16,!0),t.getFloat64(24,!0)];var e,n,h=t.getInt32(32,!0),o=t.getInt32(36,!0);return 1===h?(i.type="LineString",e=44,i.coordinates=a(t,e,o,s)):(i.type="MultiLineString",e=40+(h<<2),n=40,i.coordinates=r(t,e,n,h,o,s)),i}function f(t,s){var i=u(t,s),e=i.coordinates.length,a=60+(e<<4);return"LineString"===i.type?(i.coordinates=n(t,a,e,i.coordinates),i):(i.coordinates=h(t,a,e,i.coordinates),i)}function c(t){return"LineString"===t.type?(t.type="Polygon",t.coordinates=[t.coordinates],t):(t.coordinates=t.coordinates.reduce(s,[]),1===t.coordinates.length?(t.type="Polygon",t.coordinates=t.coordinates[0],t):(t.type="MultiPolygon",t))}function d(t,s){return c(u(t,s))}function p(t,s){return c(f(t,s))}function m(t,s){if(t>20&&(t-=20),!(t in _))return console.log("I don't know that shp type"),function(){return function(){}};var i=_[t],e=M(s);return function(t){return i(t,e)}}function M(t){return t?(console.log(t),function(s,i){return t.inverse([s.getFloat64(i,!0),s.getFloat64(i+8,!0)])}):(console.log("no trans"),function(t,s){return[t.getFloat64(s,!0),t.getFloat64(s+8,!0)]})}var g=function(t){var s=new DataView(t,0,100);return{length:s.getInt32(24,!1),version:s.getInt32(28,!0),shpCode:s.getInt32(32,!0),bbox:[s.getFloat64(36,!0),s.getFloat64(44,!0),s.getFloat64(52,!0),s.getFloat64(52,!0)]}},_={1:i,3:u,5:d,8:o,11:e,13:f,15:p,18:l},y=function(t,s){var i=new DataView(t,s,12),e=i.getInt32(4,!1)<<1,a=new DataView(t,s+12,e-4);return{id:i.getInt32(0,!1),len:e,data:a,type:i.getInt32(8,!0)}},v=function(t,s){for(var i,e=100,a=t.byteLength,n=[];a>e;)i=y(t,e),e+=8,e+=i.len,i.type&&n.push(s(i.data));return n};return function(t,s){console.log("trans is ",s);var i=g(t);return v(t,m(i.shpCode,s))}}),define("shp/dbf",[],function(){function t(t){var s=new DataView(t),i={};return i.lastUpdated=new Date(s.getUint8(1,!0)+1900,s.getUint8(2,!0),s.getUint8(3,!0)),i.records=s.getUint32(4,!0),i.headerLen=s.getUint16(8,!0),i.recLen=s.getUint16(10,!0),i}function s(t){for(var s=new DataView(t),i=[],e=32;;){if(i.push({name:String.fromCharCode.apply(this,new Uint8Array(t,e,10)).replace(/\0|\s+$/g,""),dataType:String.fromCharCode(s.getUint8(e+11)),len:s.getUint8(e+16),decimal:s.getUint8(e+17)}),13===s.getUint8(e+32))break;e+=32}return i}function i(t,s,i){for(var a,n,r={},h=0,o=i.length;o>h;)n=i[h],a=e(t,s,n.len,n.dataType),s+=n.len,"undefined"!=typeof a&&(r[n.name]=a),h++;return r}var e=function(t,s,i,e){var a=new Uint8Array(t,s,i),n=String.fromCharCode.apply(this,a).replace(/\0|\s+$/g,"");return"N"===e?parseFloat(n,10):"D"===e?new Date(n.slice(0,4),parseInt(n.slice(4,6),10)-1,n.slice(6,8)):n};return function(e){var a=s(e),n=t(e),r=(a.length+1<<5)+2,h=n.recLen,o=n.records;new DataView(e);for(var l=[];o;)l.push(i(e,r,a)),r+=h,o--;return l}}),define("shp",["proj4","shp/jszip","shp/binaryajax","shp/parseShp","shp/dbf","shp/lie"],function(t,s,i,e,a,n){function r(t){return r.getShapefile(t)}function h(t){return i(t).then(r.parseZip)}return r.combine=function(t){var s={};s.type="FeatureCollection",s.features=[];for(var i=0,e=t[0].length;e>i;)s.features.push({type:"Feature",geometry:t[0][i],properties:t[1][i]}),i++;return s},r.parseZip=function(i){var n,h=s(i),o=[];for(n in h)"shp"===n.slice(-3).toLowerCase()?o.push(n.slice(0,-4)):"dbf"===n.slice(-3).toLowerCase()?h[n]=a(h[n]):"prj"===n.slice(-3).toLowerCase()?h[n]=t(String.fromCharCode.apply(null,new Uint8Array(h[n]))):"geojson"===n.slice(-7).toLowerCase()&&o.push(n);var l=o.map(function(t){var s;return"geojson"===t.slice(-7).toLowerCase()?(s=JSON.parse(h[t]),s.fileName=t.slice(0,-8)):(s=r.combine([e(h[t+".shp"],h[t+".prj"]),h[t+".dbf"]]),s.fileName=t),s});return 1===l.length?l[0]:l},r.getShapefile=function(t){return"string"==typeof t?".zip"===t.slice(-4)?h(t):n.all([i(t+".shp").then(e),i(t+".dbf").then(a)]).then(r.combine):n.resolve(r.parseZip(t))},r}),require("shp")});
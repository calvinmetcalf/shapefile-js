<html>
<head>
<title>Javascript DBF Loader</title>
<script type="text/javascript" src="binaryajax.js"></script>
<script type="text/javascript" src="binarywrapper.js"></script>
<script type="text/javascript" src="dbf.js"></script>
<script type="text/javascript">

var file = "thematicmapping/TM_WORLD_BORDERS_SIMPL-0.3.dbf";

window.onload = function() {
  var b = new BinaryAjax(file, onBinaryAjaxComplete, onBinaryAjaxFail);
}

function onBinaryAjaxFail() { 
  alert('failed to load ' + file);
}

function onBinaryAjaxComplete(oHTTP) {
  var binFile = oHTTP.binaryResponse;

  if (window.console && window.console.log) console.log('got data, parsing dbf');

  var dbf = new DbfFile(binFile);

  if (window.console && window.console.log) console.log(dbf);
  
  for (var i = 0; i < dbf.header.recordCount; i++) {
    var record = dbf.records[i];
    if (window.console && window.console.log) console.log(record);
  }
}

</script>

</head>
<body>
<h1>Javascript DBF Loader</h1>
<p>Loading dbf... uninformative errors may appear in the dark crevices of your browser.</p>
<p>See <a href="http://github.com/RandomEtc/shapefile-js">http://github.com/RandomEtc/shapefile-js</a> for more details.</p>
</body>
</html>
